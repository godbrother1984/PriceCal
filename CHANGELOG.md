# Changelog

All notable changes to the PriceCal project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

## [Unreleased]

### ‚úÖ v8.0: Bug Fixes & Navigation Reorganization
**Date**: 31 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568 15:30

**Overview**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Dashboard bug ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö navigation structure ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

#### Bug Fixes

**1. Dashboard Card Count Mismatch (ScrapAllowance)**
- **Problem**: Dashboard card ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Master Data pending approval ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á (card ‡πÅ‡∏™‡∏î‡∏á 7 ‡πÅ‡∏ï‡πà list ‡∏°‡∏µ‡πÅ‡∏Ñ‡πà 5)
- **Root Cause**: `countPendingMasterData()` ‡∏ô‡∏±‡∏ö ScrapAllowance ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ `Promise.resolve(0)` placeholder ‡πÅ‡∏ï‡πà `getPendingMasterDataApprovals()` ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ fetch ScrapAllowance ‡∏à‡∏£‡∏¥‡∏á
- **Fix**: [dashboard.service.ts](server/src/dashboard/dashboard.service.ts) (v2.5 ‚Üí v2.6)
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `countPendingMasterData()`: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å `Promise.resolve(0)` ‡πÄ‡∏õ‡πá‡∏ô `this.scrapAllowanceRepo.count({ where: { status: 'Draft' } })`
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° ScrapAllowance import ‡πÅ‡∏•‡∏∞ repository injection
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° ScrapAllowance fetch ‡πÉ‡∏ô `getPendingMasterDataApprovals()`
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° ScrapAllowance mapping: `entityType: 'scrap-allowance'`, `title: 'Scrap Allowance - ${item.category}'`, `newValue: '${item.allowancePercentage}%'`
- **Result**: ‚úÖ Dashboard card count ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö task list ‡πÅ‡∏•‡πâ‡∏ß

#### Navigation Reorganization

**2. Settings Page Consolidation**
- ‚úÖ ‡∏¢‡πâ‡∏≤‡∏¢ **Customer Groups** ‡∏à‡∏≤‡∏Å main navigation ‚Üí Settings tabs
- ‚úÖ ‡∏¢‡πâ‡∏≤‡∏¢ **Master Data** ‡∏à‡∏≤‡∏Å main navigation ‚Üí Settings tabs
- **Rationale**: ‡∏£‡∏ß‡∏° configuration-related pages ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô Settings ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö
- **Modified Files**:
  - [MainLayout.tsx](client/src/components/layout/MainLayout.tsx) (v6.0 ‚Üí v7.0)
  - [Settings.tsx](client/src/pages/Settings.tsx) (v3.0 ‚Üí v4.1)
  - [QuickApprovalTaskList.tsx](client/src/components/QuickApprovalTaskList.tsx) (v1.8 ‚Üí v1.11)

**3. Settings Tab Icons Overlap Fix**
- **Problem**: Settings tab menu ‡∏°‡∏µ icon ‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô (emoji + SVG icons)
- **Fix**: ‡∏•‡∏ö SVG icons ‡∏≠‡∏≠‡∏Å ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞ emoji ‡πÉ‡∏ô tab labels
- **Modified File**: [Settings.tsx](client/src/pages/Settings.tsx) (v4.0 ‚Üí v4.1)

#### Files Modified

**Backend:**
- server/src/dashboard/dashboard.service.ts (v2.5 ‚Üí v2.6)

**Frontend:**
- client/src/components/layout/MainLayout.tsx (v6.0 ‚Üí v7.0)
- client/src/pages/Settings.tsx (v3.0 ‚Üí v4.1)
- client/src/components/QuickApprovalTaskList.tsx (v1.8 ‚Üí v1.11)

#### Impact

**‚úÖ Benefits:**
- Dashboard statistics accuracy: Master Data count ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ 100%
- Better UX: Settings page ‡πÄ‡∏õ‡πá‡∏ô one-stop shop ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö configurations
- Cleaner navigation: Main navigation ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞ operational pages
- Consistent behavior: Task list navigation ‡πÑ‡∏õ‡∏´‡∏≤ Settings ‡πÅ‡∏ó‡∏ô Master Data

**‚ö†Ô∏è Breaking Changes:**
- None (Navigation paths ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)

---

### ‚úÖ v7.7: Phase 2 - Customer Group Override System (Backend Complete)
**Date**: 29 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568 17:40

**Overview**: ‡∏£‡∏∞‡∏ö‡∏ö Customer Group Override ‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÑ‡∏î‡πâ ‡πÇ‡∏î‡∏¢ Override ‡∏à‡∏∞‡∏°‡∏µ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ Master Data

#### What's New?

**1. Customer Groups Module (Backend)**
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á [customer-groups.service.ts](server/src/customer-groups/customer-groups.service.ts) v1.0
  - Generic service ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 5 override types (fab-cost, selling-factor, lme-price, exchange-rate, standard-price)
  - Customer Group CRUD operations
  - Customer Mapping management
  - Override CRUD with version control (Draft ‚Üí Active ‚Üí Archived)
  - Archive logic ‡πÄ‡∏°‡∏∑‡πà‡∏≠ approve version ‡πÉ‡∏´‡∏°‡πà

- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á [customer-groups.controller.ts](server/src/customer-groups/customer-groups.controller.ts) v1.0
  - RESTful APIs ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Customer Groups (5 endpoints)
  - Customer Mapping APIs (3 endpoints)
  - Generic Override APIs (6 endpoints √ó 5 types = 30 endpoints)
  - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ JwtAuthGuard

- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á [customer-groups.module.ts](server/src/customer-groups/customer-groups.module.ts) v1.0
  - TypeORM integration ‡∏Å‡∏±‡∏ö Override entities ‡∏ó‡∏±‡πâ‡∏á 5 ‡∏ï‡∏±‡∏ß
  - Export CustomerGroupsService ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡πÉ‡∏ô modules ‡∏≠‡∏∑‡πà‡∏ô

- ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï [app.module.ts](server/src/app.module.ts:145)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° CustomerGroupsModule

**2. Price Calculation Integration**
- ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï [price-calculation.service.ts](server/src/price-calculation/price-calculation.service.ts) v3.5 ‚Üí v4.0
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `getStandardPrice()` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö CustomerGroupStandardPriceOverride ‡∏Å‡πà‡∏≠‡∏ô Master Data
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `getLmePrice()` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö CustomerGroupLMEPriceOverride ‡∏Å‡πà‡∏≠‡∏ô Master Data
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `getRawMaterialFabCost()` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö CustomerGroupFABCostOverride ‡∏Å‡πà‡∏≠‡∏ô Master Data
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `getSellingFactor()` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö CustomerGroupSellingFactorOverride ‡∏Å‡πà‡∏≠‡∏ô Master Data
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `getExchangeRateFromThbToCurrency()` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö CustomerGroupExchangeRateOverride ‡∏Å‡πà‡∏≠‡∏ô Master Data
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° Repositories ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Override entities ‡∏ó‡∏±‡πâ‡∏á 5 ‡∏ï‡∏±‡∏ß

- ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï [price-calculation.module.ts](server/src/price-calculation/price-calculation.module.ts) v5.0 ‚Üí v6.0
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° Override entities ‡∏ó‡∏±‡πâ‡∏á 5 ‡∏ï‡∏±‡∏ß‡πÉ‡∏ô TypeORM imports

**3. API Endpoints**

Customer Group CRUD:
```
GET    /customer-groups                    - ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
GET    /customer-groups/:id                - ‡∏î‡∏∂‡∏á‡∏ï‡∏≤‡∏° ID
POST   /customer-groups                    - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
PUT    /customer-groups/:id                - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï
DELETE /customer-groups/:id                - ‡∏•‡∏ö
```

Customer Mapping:
```
GET    /customer-groups/:groupId/customers                - ‡∏î‡∏∂‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°
POST   /customer-groups/:groupId/customers                - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°
DELETE /customer-groups/:groupId/customers/:customerId   - ‡∏•‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°
```

Override Management (Generic - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 5 types):
```
GET    /customer-groups/:groupId/overrides/:type                     - ‡∏î‡∏∂‡∏á Overrides
GET    /customer-groups/:groupId/overrides/:type/:overrideId         - ‡∏î‡∏∂‡∏á‡∏ï‡∏≤‡∏° ID
POST   /customer-groups/:groupId/overrides/:type                     - ‡∏™‡∏£‡πâ‡∏≤‡∏á (Draft)
PUT    /customer-groups/:groupId/overrides/:type/:overrideId         - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï (Draft only)
PUT    /customer-groups/:groupId/overrides/:type/:overrideId/approve - ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ + Archive ‡πÄ‡∏Å‡πà‡∏≤
DELETE /customer-groups/:groupId/overrides/:type/:overrideId         - ‡∏•‡∏ö (Draft only)
```

Override Types: `fab-cost`, `selling-factor`, `lme-price`, `exchange-rate`, `standard-price`

#### How It Works

**Price Calculation Flow with Overrides:**
1. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ `customerGroupId` ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ ‚Üí ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Override ‡∏à‡∏≤‡∏Å `CustomerGroupXxxOverride` (status = Active, isActive = true)
3. ‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠ Override ‚Üí ‡πÉ‡∏ä‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å Override
4. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ Override ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ customerGroupId ‚Üí ‡πÉ‡∏ä‡πâ Master Data

**Version Control:**
- ‡∏™‡∏£‡πâ‡∏≤‡∏á Override ‡πÉ‡∏´‡∏°‡πà ‚Üí status = Draft
- ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ Override ‚Üí status = Active, archive version ‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Draft
- ‡∏•‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Draft

#### Files Modified

**Backend:**
- server/src/customer-groups/customer-groups.service.ts (NEW v1.0)
- server/src/customer-groups/customer-groups.controller.ts (NEW v1.0)
- server/src/customer-groups/customer-groups.module.ts (NEW v1.0)
- server/src/app.module.ts (MODIFIED - ‡πÄ‡∏û‡∏¥‡πà‡∏° CustomerGroupsModule)
- server/src/price-calculation/price-calculation.service.ts (v3.5 ‚Üí v4.0)
- server/src/price-calculation/price-calculation.module.ts (v5.0 ‚Üí v6.0)

#### Impact

**‚úÖ Benefits:**
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞
- ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö Master Data (Global Default)
- Version control ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å Override
- Archive ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠ approve version ‡πÉ‡∏´‡∏°‡πà
- Generic API design ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Override ‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó

**‚ö†Ô∏è Breaking Changes:**
- None (Backward compatible)

**üìã Next Steps:**
- Phase 2 Frontend: Customer Groups Management UI
- Phase 2 Frontend: Override Management Components (7 tabs)
- Phase 2 Testing: End-to-end testing

---

### ‚úÖ v7.6: Entity Field Naming Standardization
**Date**: 29 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568 08:15

**Overview**: Standardize field naming conventions across all entities ‡πÅ‡∏•‡∏∞ history entities ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤

#### Why This Change?
- History entities ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠ field ‡πÑ‡∏°‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö Base entities (`changedBy`/`changedAt` ‡πÅ‡∏ó‡∏ô `createdBy`/`createdAt`)
- History entities ‡∏°‡∏µ fields ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô main entities (`priceDate`, `source`)
- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ fields

#### Entity Changes (8 History Entities Updated)

**Main History Entities:**

1. **[fab-cost-history.entity.ts](server/src/entities/fab-cost-history.entity.ts)** (v2.0 ‚Üí v3.0)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedBy` ‚Üí `createdBy`
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedAt` ‚Üí `createdAt`

2. **[selling-factor-history.entity.ts](server/src/entities/selling-factor-history.entity.ts)** (v2.0 ‚Üí v3.0)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedBy` ‚Üí `createdBy`
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedAt` ‚Üí `createdAt`

3. **[lme-price-history.entity.ts](server/src/entities/lme-price-history.entity.ts)** (v2.0 ‚Üí v3.0)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedBy` ‚Üí `createdBy`
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedAt` ‚Üí `createdAt`
   - ‚úÖ ‡∏•‡∏ö `priceDate` (‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô LmeMasterData)
   - ‚úÖ ‡∏•‡∏ö `source` (‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô LmeMasterData)
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° `description` (‡∏°‡∏µ‡πÉ‡∏ô LmeMasterData)

4. **[exchange-rate-history.entity.ts](server/src/entities/exchange-rate-history.entity.ts)** (v2.0 ‚Üí v3.0)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedBy` ‚Üí `createdBy`
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedAt` ‚Üí `createdAt`
   - ‚úÖ ‡∏•‡∏ö `source` (‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô ExchangeRateMasterData)
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° `description` (‡∏°‡∏µ‡πÉ‡∏ô ExchangeRateMasterData)

**Customer Group Override History Entities:**

5. **[customer-group-fab-cost-override-history.entity.ts](server/src/entities/customer-group-fab-cost-override-history.entity.ts)** (v1.0 ‚Üí v2.0)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedBy` ‚Üí `createdBy`
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedAt` ‚Üí `createdAt`

6. **[customer-group-selling-factor-override-history.entity.ts](server/src/entities/customer-group-selling-factor-override-history.entity.ts)** (v1.0 ‚Üí v2.0)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedBy` ‚Üí `createdBy`
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedAt` ‚Üí `createdAt`

7. **[customer-group-lme-price-override-history.entity.ts](server/src/entities/customer-group-lme-price-override-history.entity.ts)** (v1.0 ‚Üí v2.0)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedBy` ‚Üí `createdBy`
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedAt` ‚Üí `createdAt`
   - ‚úÖ ‡∏•‡∏ö `priceDate` ‡πÅ‡∏•‡∏∞ `source`
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° `description`

8. **[customer-group-exchange-rate-override-history.entity.ts](server/src/entities/customer-group-exchange-rate-override-history.entity.ts)** (v1.0 ‚Üí v2.0)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedBy` ‚Üí `createdBy`
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedAt` ‚Üí `createdAt`
   - ‚úÖ ‡∏•‡∏ö `source`
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° `description`

9. **[customer-group-standard-price-override-history.entity.ts](server/src/entities/customer-group-standard-price-override-history.entity.ts)** (v1.0 ‚Üí v2.0)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedBy` ‚Üí `createdBy`
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `changedAt` ‚Üí `createdAt`

#### Backend Service Changes

**[data.service.ts](server/src/data/data.service.ts)**
- ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `createFabCostHistory()`: `changedBy` ‚Üí `createdBy`
- ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `createSellingFactorHistory()`: `changedBy` ‚Üí `createdBy`

#### Documentation

**[PROJECT_DOCUMENTATION.md](PROJECT_DOCUMENTATION.md)** (v7.5 ‚Üí v7.6)
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ "Entity Field Naming Standards"
- ‚úÖ ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô BaseEntity, VersionedEntity, ExternalDataEntity
- ‚úÖ ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô History Entity structure
- ‚úÖ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á Field Naming Conventions
- ‚úÖ Checklist ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Entity ‡πÉ‡∏´‡∏°‡πà
- ‚úÖ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á code ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ú‡∏¥‡∏î

#### Field Naming Standards

**Base Entity Fields:**
- `createdAt`, `updatedAt`, `createdBy`, `updatedBy`

**Versioned Entity Fields:**
- `version`, `status`, `approvedBy`, `approvedAt`
- `effectiveFrom`, `effectiveTo`, `isActive`, `changeReason`

**History Entity Fields:**
- `{entityName}Id` (reference)
- ‡∏ó‡∏∏‡∏Å business field ‡∏à‡∏≤‡∏Å main entity
- `createdBy`, `createdAt` (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà changedBy/changedAt)
- `changeReason`

#### Impact
- ‚úÖ 0 compilation errors
- ‚úÖ Server ‡∏£‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- ‚úÖ ‡∏ó‡∏∏‡∏Å entity ‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
- ‚úÖ Documentation ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô reference ‡πÑ‡∏î‡πâ

---

### ‚úÖ v7.5: Standard Price Migration - Version Control Removed
**Date**: 29 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568 00:15

**Overview**: ‡∏•‡∏ö Version Control ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Standard Price ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà Sync ‡∏à‡∏≤‡∏Å MongoDB (Read-Only), ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà User ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏á

#### Why This Change?
- **Standard Price** ‡∏ñ‡∏π‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô **Read-Only MongoDB Data** ‡πÉ‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô v7.4 ‡πÅ‡∏•‡πâ‡∏ß
- Version Control (Draft ‚Üí Active ‚Üí Archived) ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà User ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- Standard Price Sync ‡∏à‡∏≤‡∏Å D365 ‡∏ú‡πà‡∏≤‡∏ô MongoDB ‚Üí ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ version control

#### Master Data Classification (After v7.5)

**Read-Only (ExternalDataEntity)** - Sync from MongoDB:
- ‚úÖ Customer
- ‚úÖ Product
- ‚úÖ RawMaterial
- ‚úÖ **StandardPrice** ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡∏à‡∏≤‡∏Å Version-Controlled

**Version-Controlled (VersionedEntity)** - User-Created:
- ‚úÖ LME Master Data
- ‚úÖ Exchange Rate Master Data
- ‚úÖ FAB Cost
- ‚úÖ Selling Factor
- ‚úÖ Scrap Allowance

#### Backend Changes

1. **[standard-price.entity.ts](server/src/entities/standard-price.entity.ts)** (v2.0 ‚Üí v3.0)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô base class: `extends VersionedEntity` ‚Üí `extends ExternalDataEntity`
   - ‚úÖ ‡∏•‡∏ö fields: status, version, approvedBy, approvedAt, effectiveFrom, effectiveTo, changeReason
   - ‚úÖ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞: sourceSystem, lastSyncedAt, isActive (‡∏à‡∏≤‡∏Å ExternalDataEntity)

2. **[standard-price-history.entity.ts](server/src/entities/standard-price-history.entity.ts)**
   - ‚úÖ ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ)

3. **[app.module.ts](server/src/app.module.ts)**
   - ‚úÖ ‡∏•‡∏ö StandardPriceHistory ‡∏à‡∏≤‡∏Å TypeOrmModule entities

4. **[data.service.ts](server/src/data/data.service.ts)** (v3.14 ‚Üí v3.15)
   - ‚úÖ ‡∏•‡∏ö methods (~400 lines):
     - `rollbackStandardPrice()` (73 lines)
     - `approveStandardPrice()` (82 lines)
     - `updateStandardPrice()` (129 lines)
     - `createStandardPriceHistory()` (16 lines)
     - `getStandardPriceHistory()` (5 lines)
     - `getStandardPriceHistoryById()` (13 lines)
     - `addStandardPrice()` (36 lines)
     - `deleteStandardPrice()` (14 lines)
     - `fixStandardPricesStatus()` (38 lines)
   - ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `findAllStandardPrices()`:
     - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `order: { version: 'DESC', effectiveFrom: 'DESC' }` ‚Üí `order: { createdAt: 'DESC' }`
   - ‚úÖ ‡∏•‡∏ö StandardPriceHistory repository injection

5. **[data.controller.ts](server/src/data/data.controller.ts)**
   - ‚úÖ ‡∏•‡∏ö API endpoints ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (~10 endpoints):
     - `GET /standard-prices/history/raw-material/:rawMaterialId`
     - `GET /standard-prices/history/:id`
     - `POST /standard-prices`
     - `PUT /standard-prices/:id/approve`
     - `PUT /standard-prices/:id/rollback`
     - `POST /standard-prices/fix-status`
     - `PUT /standard-prices/:id`
     - `DELETE /standard-prices/:id`
   - ‚úÖ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ `GET /standard-prices` (read-only)

6. **[dashboard.service.ts](server/src/dashboard/dashboard.service.ts)** (v2.0 ‚Üí v2.1)
   - ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç query conditions:
     - Line 368: `where: { status: 'Draft' }` ‚Üí `where: { isActive: true }`
     - Line 565: `count({ where: { status: 'Draft' } })` ‚Üí `count({ where: { isActive: true } })`
   - ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç property references:
     - Lines 400-401: `version: item.version, changeReason: item.changeReason` ‚Üí `version: 'N/A', changeReason: 'External Data Sync'`

7. **[seeder.service.ts](server/src/database/seeder.service.ts)** (v1.3 ‚Üí v1.4)
   - ‚úÖ ‡∏•‡∏ö field: `effectiveFrom: new Date('2024-01-01')`
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° fields: `source: 'MONGODB', dataSource: 'MONGODB'`
   - ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç where clause: `where: { rawMaterialId, effectiveFrom }` ‚Üí `where: { rawMaterialId }`

8. **[price-calculation.service.ts](server/src/price-calculation/price-calculation.service.ts)** (v3.4 ‚Üí v3.5)
   - ‚úÖ Method `getStandardPrice()` (Lines 685-705):
     - ‡∏•‡∏ö: `where: { isActive: true, status: 'Active' }` ‚Üí `where: { isActive: true }`
     - ‡∏•‡∏ö: `order: { version: 'DESC' }` ‚Üí `order: { createdAt: 'DESC' }`
     - ‡∏•‡∏ö: `Status: ${pricing ? pricing.status : 'N/A'}` ‚Üí `Price: ${pricing ? pricing.price : 'N/A'}`
   - ‚úÖ Method `getMasterDataVersions()` (Lines 858-868):
     - ‡∏•‡∏ö: `where: { isActive: true, status: 'Active' }`
     - ‡∏•‡∏ö: `order: { version: 'DESC' }`
     - ‡∏•‡∏ö: `versions.standardPriceVersion = standardPrice.version`

#### Compilation Results
```bash
‚úÖ Found 0 errors. Watching for file changes.
‚úÖ Server started successfully on port 3001
```

#### Database Migration Required
```sql
-- ‡∏•‡∏ö columns ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß
ALTER TABLE standard_prices DROP COLUMN status;
ALTER TABLE standard_prices DROP COLUMN version;
ALTER TABLE standard_prices DROP COLUMN approvedBy;
ALTER TABLE standard_prices DROP COLUMN approvedAt;
ALTER TABLE standard_prices DROP COLUMN effectiveFrom;
ALTER TABLE standard_prices DROP COLUMN effectiveTo;
ALTER TABLE standard_prices DROP COLUMN changeReason;

-- ‡∏•‡∏ö History Table
DROP TABLE standard_price_history;

-- External Data Fields (already exist from ExternalDataEntity)
-- sourceSystem, lastSyncedAt, isActive
```

**User Instructions**:
> "‡∏•‡∏ö code ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå db ‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ"

‡∏£‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏•‡∏ö `database.sqlite` ‡πÅ‡∏•‡πâ‡∏ß TypeORM ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á schema ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**Status**: ‚úÖ **COMPLETE** - Code cleanup done, waiting for database deletion

---

### ‚úÖ Phase 2.3: Version Control UI for LME and Exchange Rate Master Data
**Date**: 29 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568 05:20

**Overview**: ‡πÄ‡∏û‡∏¥‡πà‡∏° Version Control UI (Draft/Active/Archived workflow) ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö LME Master Data ‡πÅ‡∏•‡∏∞ Exchange Rate Master Data, ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° Item Group Dropdown ‡πÉ‡∏´‡πâ LME

#### Frontend Changes
1. **[MasterData.tsx](client/src/pages/MasterData.tsx)** (v7.6 ‚Üí v8.0)
   - ‚úÖ **LmePrices Component**: ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà MasterDataTable ‡∏î‡πâ‡∏ß‡∏¢ custom Version Control UI
     - ‡πÄ‡∏û‡∏¥‡πà‡∏° State management: data, loading, error, modal, editingItem, versionHistory
     - ‡πÄ‡∏û‡∏¥‡πà‡∏° Item Group dropdown (endpoint: `d365-item-groups`) ‡πÅ‡∏ó‡∏ô text input
     - ‡πÄ‡∏û‡∏¥‡πà‡∏° Currency dropdown (endpoint: `currencies`)
     - Auto-populate itemGroupName ‡πÅ‡∏•‡∏∞ currencyName ‡∏à‡∏≤‡∏Å dropdown selection
     - Table columns: Version, Status, Item Group, Price (THB), Currency, Description, Actions
     - Actions: Approve (Draft only), Edit (Draft only), Delete (Draft only), History (all)
     - Filter: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Active ‡πÅ‡∏•‡∏∞ Draft (‡∏ã‡πà‡∏≠‡∏ô Archived)
     - ‡πÉ‡∏ä‡πâ EditModal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Create/Edit
     - ‡πÉ‡∏ä‡πâ VersionHistoryModal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏π history ‡πÅ‡∏•‡∏∞ rollback

   - ‚úÖ **ExchangeRates Component**: ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà MasterDataTable ‡∏î‡πâ‡∏ß‡∏¢ custom Version Control UI
     - ‡πÄ‡∏û‡∏¥‡πà‡∏° State management ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô LmePrices
     - ‡πÉ‡∏ä‡πâ Currency dropdown ‡∏ó‡∏±‡πâ‡∏á Source ‡πÅ‡∏•‡∏∞ Destination (endpoint: `currencies`)
     - Auto-populate sourceCurrencyName ‡πÅ‡∏•‡∏∞ destinationCurrencyName
     - Table columns: Version, Status, From Currency, To Currency, Rate, Description, Actions
     - Actions: Approve (Draft only), Edit (Draft only), Delete (Draft only), History (all)
     - Filter: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Active ‡πÅ‡∏•‡∏∞ Draft (‡∏ã‡πà‡∏≠‡∏ô Archived)
     - ‡πÉ‡∏ä‡πâ EditModal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Create/Edit
     - ‡πÉ‡∏ä‡πâ VersionHistoryModal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏π history ‡πÅ‡∏•‡∏∞ rollback

2. **[VersionHistoryModal.tsx](client/src/components/VersionHistoryModal.tsx)** (v1.4 ‚Üí v1.5)
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° 'lme' ‡πÅ‡∏•‡∏∞ 'exchangeRate' ‡πÉ‡∏ô MasterDataType union (already existed)
   - ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç API endpoints:
     - `lme: '/api/data/lme-master-data'` (‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏õ‡πá‡∏ô '/api/data/lme-prices')
     - `exchangeRate: '/api/data/exchange-rate-master-data'` (‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏õ‡πá‡∏ô '/api/data/exchange-rates')
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° display fields ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö LME ‡πÅ‡∏•‡∏∞ Exchange Rate (already existed)

#### Backend Status
- ‚úÖ Backend ‡∏°‡∏µ Version Control ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß:
  - LmeMasterData entity extends VersionedEntity
  - ExchangeRateMasterData entity extends VersionedEntity
  - ‡∏°‡∏µ endpoints ‡∏Ñ‡∏£‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö CRUD + Approve + Rollback
  - data.service.ts ‡∏°‡∏µ findAllItemGroups() ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Item Group dropdown ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß

#### Version Control Workflow
```
Draft ‚Üí Approve ‚Üí Active
            ‚Üì
         Archived ‚Üê (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ version ‡πÉ‡∏´‡∏°‡πà Active)
            ‚Üì
        Rollback ‚Üí Active (new version)
```

**Features**:
- ‚úÖ Draft versions: ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ Edit, Delete ‡πÑ‡∏î‡πâ
- ‚úÖ Active versions: ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô table, ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
- ‚úÖ Archived versions: ‡∏ã‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏Å table ‡∏´‡∏•‡∏±‡∏Å, ‡πÅ‡∏ï‡πà‡∏î‡∏π‡πÑ‡∏î‡πâ‡πÉ‡∏ô History modal
- ‚úÖ Approve: Draft ‚Üí Active (archive version ‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
- ‚úÖ Rollback: Archived ‚Üí Active version ‡πÉ‡∏´‡∏°‡πà (auto increment version)
- ‚úÖ Version History: ‡∏î‡∏π history ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ record
- ‚úÖ Item Group Dropdown: ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô typo, consistent data
- ‚úÖ Currency Dropdown: dropdown ‡∏°‡∏µ validation ‡πÅ‡∏•‡∏∞ auto-populate name

**Rationale**:
- LME ‡πÅ‡∏•‡∏∞ Exchange Rate ‡πÄ‡∏õ‡πá‡∏ô Master Data ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ö‡πà‡∏≠‡∏¢
- Version Control ‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° history ‡πÅ‡∏•‡∏∞ audit trail
- Item Group Dropdown ‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ typo ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° UX
- Consistent pattern ‡∏Å‡∏±‡∏ö Master Data ‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Standard Price, FAB Cost, Selling Factor, Scrap Allowance)

**Status**: ‚úÖ **COMPLETE** - Frontend UI updated, Backend already supports Version Control

---

### ‚úÖ Phase 2.1: Tab Reordering - LME Master Data First
**Date**: 28 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568 23:55

**Overview**: ‡∏¢‡πâ‡∏≤‡∏¢ LME Master Data tab ‡πÑ‡∏õ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô FAB Cost ‡πÉ‡∏ô Pricing Master section

**Changes**:
- ‚úÖ **[MasterData.tsx](client/src/pages/MasterData.tsx)** (v7.3 ‚Üí v7.4)
  - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö Pricing Master tabs
  - **‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏î‡∏¥‡∏°**: FAB Cost ‚Üí Selling Factors ‚Üí LME Master Data ‚Üí Exchange Rates
  - **‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà**: **LME Master Data** ‚Üí FAB Cost ‚Üí Selling Factors ‚Üí Exchange Rates

**Rationale**:
- LME Price ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ô‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
- ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏£‡∏¥‡∏á: LME ‚Üí FAB Cost ‚Üí Selling Factor ‚Üí Exchange Rate

**Status**: ‚úÖ **COMPLETE** - HMR updated successfully

---

### ‚úÖ Phase 2.2: Scrap Allowance Master Data - Complete Implementation
**Date**: 29 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568 00:45

**Overview**: ‡∏™‡∏£‡πâ‡∏≤‡∏á Scrap Allowance Master Data ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á Backend ‡πÅ‡∏•‡∏∞ Frontend ‡∏û‡∏£‡πâ‡∏≠‡∏° Version Control

#### Backend Implementation
1. **[scrap-allowance.entity.ts](server/src/entities/scrap-allowance.entity.ts)** (v1.0 - New)
   - ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á ScrapAllowance Entity ‡∏ó‡∏µ‡πà extend ‡∏à‡∏≤‡∏Å VersionedEntity
   - ‚úÖ Fields: itemGroupCode, itemGroupName, scrapPercentage (decimal), description
   - ‚úÖ Version Control: version, status (Draft/Active/Archived), approvedBy, effectiveFrom, effectiveTo

2. **[scrap-allowance.service.ts](server/src/data/scrap-allowance.service.ts)** (v1.0 - New, 235 lines)
   - ‚úÖ getScrapAllowances() - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° itemGroupCode
   - ‚úÖ createScrapAllowance() - ‡∏™‡∏£‡πâ‡∏≤‡∏á Draft version ‡πÉ‡∏´‡∏°‡πà (auto increment version)
   - ‚úÖ updateScrapAllowance() - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Draft ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
   - ‚úÖ deleteScrapAllowance() - ‡∏•‡∏ö Draft ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
   - ‚úÖ approveScrapAllowance() - Draft ‚Üí Active (Archive version ‡πÄ‡∏Å‡πà‡∏≤)
   - ‚úÖ rollbackScrapAllowance() - Archived ‚Üí Active ‡πÉ‡∏´‡∏°‡πà (‡πÄ‡∏û‡∏¥‡πà‡∏° version)
   - ‚úÖ getScrapAllowanceHistory() - ‡∏î‡∏∂‡∏á version history ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á itemGroupCode ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
   - ‚úÖ getActiveScrapAllowanceByItemGroup() - ‡∏î‡∏∂‡∏á Active version ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤

3. **[scrap-allowance.controller.ts](server/src/data/scrap-allowance.controller.ts)** (v1.0 - New)
   - ‚úÖ GET `/api/data/scrap-allowances` - ‡∏î‡∏∂‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
   - ‚úÖ GET `/api/data/scrap-allowances/history/:id` - ‡∏î‡∏∂‡∏á version history
   - ‚úÖ POST `/api/data/scrap-allowances` - ‡∏™‡∏£‡πâ‡∏≤‡∏á Draft
   - ‚úÖ PUT `/api/data/scrap-allowances/:id/approve` - Approve Draft
   - ‚úÖ PUT `/api/data/scrap-allowances/:id/rollback` - Rollback Archived
   - ‚úÖ PUT `/api/data/scrap-allowances/:id` - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Draft
   - ‚úÖ DELETE `/api/data/scrap-allowances/:id` - ‡∏•‡∏ö Draft

4. **[app.module.ts](server/src/app.module.ts)**
   - ‚úÖ Register ScrapAllowance Entity, Controller, Service

#### Frontend Implementation
5. **[MasterData.tsx](client/src/pages/MasterData.tsx)** (v7.4 ‚Üí v7.5, +275 lines)
   - ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á ScrapAllowance component ‡πÉ‡∏´‡∏°‡πà
   - ‚úÖ ‡πÉ‡∏ä‡πâ pattern ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö SellingFactors (Version Control workflow)
   - ‚úÖ Table columns: Version, Item Group Code, Item Group Name, Scrap %, Status, Actions
   - ‚úÖ Scrap % ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô percentage (x 100 ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á 2 ‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°)
   - ‚úÖ Actions: Approve (Draft only), History, Edit (Draft only), Delete (Draft only)
   - ‚úÖ ‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Active ‡πÅ‡∏•‡∏∞ Draft (‡∏ã‡πà‡∏≠‡∏ô Archived)
   - ‚úÖ EditModal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Create/Edit ‡∏û‡∏£‡πâ‡∏≠‡∏° validation
   - ‚úÖ VersionHistoryModal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏π history ‡πÅ‡∏•‡∏∞ rollback
   - ‚úÖ Toast notifications ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å actions
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° Scrap Allowance tab ‡πÉ‡∏ô Pricing Master section (‡∏´‡∏•‡∏±‡∏á Selling Factors, ‡∏Å‡πà‡∏≠‡∏ô Exchange Rates)

6. **[VersionHistoryModal.tsx](client/src/components/VersionHistoryModal.tsx)** (v1.3 ‚Üí v1.4)
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° 'scrapAllowance' ‡πÉ‡∏ô MasterDataType union
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° `/api/data/scrap-allowances` endpoint
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° Thai label: "Scrap Allowance"
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° display fields: Item Group, Scrap % (formatted)

#### Database Schema
- ‚úÖ Table: `scrap_allowances` (auto-created by TypeORM)
- ‚úÖ Columns: id (UUID), itemGroupCode, itemGroupName, scrapPercentage (decimal 5,4)
- ‚úÖ Version Control fields: version, status, isActive, approvedBy, approvedAt, effectiveFrom, effectiveTo
- ‚úÖ Audit fields: createdAt, updatedAt, createdBy, updatedBy, changeReason

**Rationale**:
- Scrap Allowance ‡∏Ñ‡∏∑‡∏≠ % ‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ Item Group (‡πÄ‡∏ä‡πà‡∏ô Metal scrap 5%, Plastic scrap 3%)
- ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì RM ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ: RM Weight √ó (1 + Scrap %)
- ‡∏°‡∏µ Version Control ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Master Data ‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Draft ‚Üí Active ‚Üí Archived)
- Reference ‡∏Å‡∏±‡∏ö Item Group Code ‡∏à‡∏≤‡∏Å D365

**Status**: ‚úÖ **COMPLETE** - Backend + Frontend ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô, HMR compiled successfully

---

### ‚úÖ Phase 2.2 Enhancement: Item Group Dropdown for Scrap Allowance
**Date**: 29 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568 01:10

**Overview**: ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á Scrap Allowance form ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ dropdown ‡πÅ‡∏ó‡∏ô free text input ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô typo ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

#### Changes
1. **[MasterData.tsx](client/src/pages/MasterData.tsx)** (v7.5 ‚Üí v7.6)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô itemGroupCode ‡∏à‡∏≤‡∏Å `text` input ‚Üí `select` dropdown
   - ‚úÖ ‡πÉ‡∏ä‡πâ SearchableSelect component ‡∏û‡∏£‡πâ‡∏≠‡∏° endpoint: `d365-item-groups`
   - ‚úÖ Dropdown ‡πÅ‡∏™‡∏î‡∏á: "Code - Name" (‡πÄ‡∏ä‡πà‡∏ô "AL - Aluminum Group")
   - ‚úÖ Auto-populate itemGroupName ‡∏à‡∏≤‡∏Å Item Group ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô handleSave()
   - ‚úÖ ‡∏•‡∏ö itemGroupName field ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å form (auto-filled ‡∏à‡∏≤‡∏Å dropdown)

#### API Endpoint Used
- **GET** `/api/data/d365-item-groups` - ‡∏î‡∏∂‡∏á Item Group list
  - Mock data: AL (Aluminum Group), CU (Copper Group), ST (Steel Group)
  - Return format: `{ id, name, code }`
  - ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï: ‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å MongoDB sync

**Rationale**:
- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô typo ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå Item Group Code ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
- Validation: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Item Groups ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
- UX ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô: ‡∏°‡∏µ search ‡πÅ‡∏•‡∏∞ autocomplete ‡πÉ‡∏ôdropdown
- Consistency: Item Group Name ‡∏ñ‡∏π‡∏Å auto-populate ‡∏à‡∏≤‡∏Å master data

**Status**: ‚úÖ **COMPLETE** - Dropdown ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ, HMR updated successfully

---

### ‚úÖ Phase 2.2 Enhancement: Real Item Groups from Raw Materials
**Date**: 29 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2568 01:30

**Overview**: ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å mock data ‡πÄ‡∏õ‡πá‡∏ô‡∏î‡∏∂‡∏á Item Groups ‡∏à‡∏≤‡∏Å Raw Materials ‡∏ó‡∏µ‡πà sync ‡∏°‡∏≤‡∏à‡∏≤‡∏Å MongoDB ‡πÅ‡∏•‡πâ‡∏ß

#### Backend Changes
1. **[data.service.ts](server/src/data/data.service.ts)** - ‡πÄ‡∏û‡∏¥‡πà‡∏° findAllItemGroups()
   - ‚úÖ ‡∏î‡∏∂‡∏á unique `itemGroupCode` ‡∏à‡∏≤‡∏Å `raw_materials` table
   - ‚úÖ ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ `isActive = true`
   - ‚úÖ ‡πÉ‡∏ä‡πâ `category` ‡πÄ‡∏õ‡πá‡∏ô name, ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ä‡πâ "{code} Group"
   - ‚úÖ Generate ID format: `IG-{code}` (‡πÄ‡∏ä‡πà‡∏ô IG-AL, IG-CU)
   - ‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° code alphabetically

2. **[data.controller.ts](server/src/data/data.controller.ts)** - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç findAllD365ItemGroups()
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å hardcoded mock data (3 items)
   - ‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ `this.dataService.findAllItemGroups()`
   - ‚úÖ Return ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å Raw Materials

#### Data Flow
```
Raw Materials (MongoDB sync)
  ‚Üí ‡∏°‡∏µ itemGroupCode field
  ‚Üí Extract unique codes
  ‚Üí Return: [{ id, code, name }]
  ‚Üí ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Scrap Allowance dropdown
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**:
```json
[
  { "id": "IG-AL", "code": "AL", "name": "Aluminum" },
  { "id": "IG-CU", "code": "CU", "name": "Copper" },
  { "id": "IG-ST", "code": "ST", "name": "Steel" }
]
```

**Rationale**:
- ‚úÖ **Real Data**: ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å Raw Materials ‡∏ó‡∏µ‡πà sync ‡∏°‡∏≤‡∏à‡∏≤‡∏Å MongoDB
- ‚úÖ **No Mock Data**: ‡πÑ‡∏°‡πà‡∏°‡∏µ hardcoded data ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ
- ‚úÖ **Dynamic**: Item Groups ‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠ Raw Materials ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
- ‚úÖ **No Extra Sync**: ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° MongoDB sync endpoint ‡πÉ‡∏´‡∏°‡πà

**Status**: ‚úÖ **COMPLETE** - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Raw Materials ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

---

### üìù Phase 2 Planning - UI/UX Improvements & New Features
‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà 4 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ô Phase 2 ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ:

1. ‚úÖ **Tab Reordering**: ‡∏¢‡πâ‡∏≤‡∏¢ LME Master Data tab ‡πÑ‡∏õ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô FAB Cost (‡πÄ‡∏û‡∏£‡∏≤‡∏∞ LME ‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ô‡∏™‡∏π‡∏ï‡∏£)
2. ‚úÖ **Scrap Allowance Master Data**: ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢ (% ‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å RM) ‡πÇ‡∏î‡∏¢ reference ‡∏Å‡∏±‡∏ö Item Group Code
3. ‚è≥ **Formula Constants/Variables**: ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÉ‡∏ô‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì (‡πÄ‡∏ä‡πà‡∏ô markup, overhead) ‡∏û‡∏£‡πâ‡∏≠‡∏° version control
4. ‚è≥ **Free Text Raw Material**: ‡πÄ‡∏û‡∏¥‡πà‡∏° RM ‡πÅ‡∏ö‡∏ö free text ‡πÉ‡∏ô Dummy BOQ (‡∏ä‡∏∑‡πà‡∏≠, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô, ‡∏´‡∏ô‡πà‡∏ß‡∏¢, ‡∏£‡∏≤‡∏Ñ‡∏≤)

‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏ô [PROJECT_DOCUMENTATION.md](PROJECT_DOCUMENTATION.md) ‚Üí Phase 2

## [7.4] - 2025-10-28

### Changed - Move Standard Prices to Read-Only MongoDB Data ‚úÖ
**Overview**: ‡∏¢‡πâ‡∏≤‡∏¢ Standard Prices ‡∏à‡∏≤‡∏Å Pricing Master ‡πÑ‡∏õ‡∏¢‡∏±‡∏á MongoDB Sync ‚Üí View MongoDB Data ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• read-only ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MongoDB ‡∏≠‡∏∑‡πà‡∏ô‡πÜ

#### Changes
1. **Remove from Pricing Master** ([MasterData.tsx](client/src/pages/MasterData.tsx):7.2 ‚Üí 7.3)
   - ‚úÖ ‡∏•‡∏ö Standard Prices tab ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Pricing Master section
   - ‚úÖ Pricing Master ‡∏°‡∏µ‡πÄ‡∏â‡∏û‡∏≤‡∏∞: Fab Costs, Selling Factors, LME Master Data, Exchange Rates

2. **Add to MasterDataViewer** ([MasterDataViewer.tsx](client/src/components/MasterDataViewer.tsx):1.2 ‚Üí 1.3)
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° 'standardPrices' ‡πÉ‡∏ô DataType union type
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° Standard Prices button (üí∞ icon) ‡πÉ‡∏ô MongoDB Data section
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° loadData() endpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö standard-prices
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° table columns: Raw Material, Price, Currency, Version
   - ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: rawMaterialId, price (Thai format), currency, version badge
   - ‚úÖ ‡∏ã‡πà‡∏≠‡∏ô Source, Last Synced, Status columns ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Standard Prices

#### Rationale
- Standard Prices ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å MongoDB ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• master ‡∏≠‡∏∑‡πà‡∏ô‡πÜ
- ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÅ‡∏•‡∏∞ sync ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ MongoDB
- ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô read-only ‡∏î‡∏π‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡∏°‡∏≤
- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° Add/Edit/Delete/Approve (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Raw Materials, Products, Customers)

#### Status
‚úÖ **Standard Prices ‡∏ñ‡∏π‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô Read-Only MongoDB Data ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à**
- ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô MongoDB Sync ‚Üí View MongoDB Data section
- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (read-only)
- ‡πÅ‡∏™‡∏î‡∏á version, price, currency, rawMaterialId
- ‡πÉ‡∏ä‡πâ Thai locale ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤

## [7.3] - 2025-10-28

### Fixed - Version History Improvements ‚úÖ
**Overview**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Version History ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á Archived versions ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° Delete/Approve ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Draft versions

#### Backend API Fixes
1. **Fixed History API** (`server/src/data/data.service.ts`)
   - ‚úÖ `getSellingFactorHistory()` - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å main table ‡πÅ‡∏ó‡∏ô History table
   - ‚úÖ `getFabCostHistory()` - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡∏î‡∏∂‡∏á‡∏ó‡∏∏‡∏Å versions ‡∏Ç‡∏≠‡∏á name ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
   - ‚úÖ `getStandardPriceHistoryById()` - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡∏î‡∏∂‡∏á‡∏ó‡∏∏‡∏Å versions ‡∏Ç‡∏≠‡∏á rawMaterialId ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
   - ‚úÖ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á Active, Draft, ‡πÅ‡∏•‡∏∞ Archived versions
   - ‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° version DESC

#### Frontend Improvements
2. **Filter Active/Draft Only** (`client/src/pages/MasterData.tsx` v7.1 ‚Üí v7.2)
   - ‚úÖ ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Active ‡πÅ‡∏•‡∏∞ Draft versions
   - ‚úÖ ‡∏ã‡πà‡∏≠‡∏ô Archived versions ‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô History Modal)
   - ‚úÖ ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö 3 tables: FAB Cost, Standard Price, Selling Factors

3. **Delete & Approve Buttons** (`client/src/components/VersionHistoryModal.tsx` v1.2 ‚Üí v1.3)
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° **Approve** (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Draft versions
     - Approve Draft ‚Üí Active (Active ‡πÄ‡∏Å‡πà‡∏≤‡∏à‡∏∞‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô Archived)
     - ‡πÅ‡∏™‡∏î‡∏á confirmation dialog
     - ‡πÅ‡∏™‡∏î‡∏á loading state ‡πÅ‡∏•‡∏∞ toast notifications
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° **Delete** (‡∏™‡∏µ‡πÅ‡∏î‡∏á) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Draft versions
     - ‡∏•‡∏ö Draft version ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
     - ‡πÅ‡∏™‡∏î‡∏á confirmation dialog
     - ‡πÅ‡∏™‡∏î‡∏á loading state ‡πÅ‡∏•‡∏∞ toast notifications
   - ‚úÖ Import Trash2 icon ‡∏à‡∏≤‡∏Å lucide-react
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° `handleDelete()` ‡πÅ‡∏•‡∏∞ `handleApprove()` functions

#### Bug Fixes
- ‚úÖ ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Version History Modal ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á Archived versions
- ‚úÖ ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á multiple versions ‡∏Ç‡∏≠‡∏á pattern ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° Delete ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Draft versions (‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏¥‡∏ò‡∏µ‡∏•‡∏ö Draft)

#### Status
‚úÖ **Version History System ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå 100%**
- ‡πÅ‡∏™‡∏î‡∏á Archived versions ‡πÉ‡∏ô History Modal
- ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° Rollback ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Archived versions
- ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° Delete ‡πÅ‡∏•‡∏∞ Approve ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Draft versions
- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Active/Draft (‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô)

## [7.2] - 2025-10-28

### Added - Phase 1 Complete: Toast Notification System ‚úÖ
**Overview**: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö Toast Notifications ‡πÅ‡∏ó‡∏ô browser alert() dialogs ‡πÄ‡∏û‡∏∑‡πà‡∏≠ UX ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö Version History + Rollback workflow ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

#### Frontend Components
1. **Toast Component** (NEW - `client/src/components/Toast.tsx` v1.0)
   - ‚úÖ 4 toast types: success, error, warning, info ‡∏û‡∏£‡πâ‡∏≠‡∏° color-coding ‡πÅ‡∏•‡∏∞ icons
   - ‚úÖ Auto-dismiss with configurable duration (default 5 seconds)
   - ‚úÖ Manual close button
   - ‚úÖ Slide-in animation from right
   - ‚úÖ Icons ‡∏à‡∏≤‡∏Å lucide-react (CheckCircle, XCircle, AlertCircle, Info, X)
   - ‚úÖ TypeScript strict typing ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö props

2. **ToastContext Provider** (NEW - `client/src/contexts/ToastContext.tsx` v1.0)
   - ‚úÖ React Context API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö global toast state management
   - ‚úÖ Helper methods: `success()`, `error()`, `warning()`, `info()`
   - ‚úÖ Toast container with fixed positioning (top-right, z-index 9999)
   - ‚úÖ Toast queue management (multiple toasts can stack)
   - ‚úÖ `useToast()` custom hook ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö consuming context
   - ‚úÖ Automatic toast ID generation

3. **CSS Animations** (`client/src/index.css` v1.1 ‚Üí v1.2)
   - ‚úÖ Added `@keyframes slide-in-right` animation
   - ‚úÖ Added `.animate-slide-in-right` utility class

4. **App Provider Integration** (`client/src/App.tsx` v3.0 ‚Üí v3.1)
   - ‚úÖ Wrapped all routes with ToastProvider:
     - SetupWizard
     - Login
     - MainLayout
   - ‚úÖ Toast notifications now available globally

5. **VersionHistoryModal Toast Integration** (`client/src/components/VersionHistoryModal.tsx` v1.1 ‚Üí v1.2)
   - ‚úÖ Replaced `alert()` with `toast.success()` for rollback success
   - ‚úÖ Replaced error alerts with `toast.error()` for rollback failures
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° `useToast()` hook
   - ‚úÖ Toast messages in Thai: "Rollback ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!", "Rollback ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß"

#### Testing & Validation
- ‚úÖ **API Testing**: ‡∏™‡∏£‡πâ‡∏≤‡∏á `test-version-history.js` ‡πÅ‡∏•‡∏∞ `test-rollback-archived.js`
- ‚úÖ **Login API**: ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå (JWT token generation)
- ‚úÖ **Selling Factors API**: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• version ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
- ‚úÖ **Version History API**: ‡πÅ‡∏™‡∏î‡∏á version history ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‚úÖ **Rollback API**: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö rollback ‡∏à‡∏≤‡∏Å v3 (Archived) ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á v5 (Active) ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
  - v3 Archived ‚Üí rollback ‚Üí v5 Active (factor = 2.5)
  - v4 Active ‚Üí ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Archived
  - changeReason: "Rolled back from version 3"

#### Status
üéâ **Phase 1 COMPLETE!** Version Control System ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô 100%

## [7.1] - 2025-10-28

### Added - Phase 1: Document Control & Version Management ‚úÖ
**Overview**: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö Version History ‡πÅ‡∏•‡∏∞ Rollback ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö Master Data ‡∏ó‡∏±‡πâ‡∏á 5 ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏û‡∏£‡πâ‡∏≠‡∏° UI Modal ‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢

#### Frontend Components
1. **VersionHistoryModal Component** (NEW - `client/src/components/VersionHistoryModal.tsx` v1.1)
   - ‚úÖ Timeline view ‡πÅ‡∏™‡∏î‡∏á version history ‡πÅ‡∏ö‡∏ö vertical timeline ‡∏û‡∏£‡πâ‡∏≠‡∏° dots ‡πÅ‡∏•‡∏∞ connecting lines
   - ‚úÖ Status badges ‡∏™‡∏µ‡∏™‡∏±‡∏ô‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° (Draft=‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á, Active=‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß, Archived=‡πÄ‡∏ó‡∏≤)
   - ‚úÖ ‡πÅ‡∏™‡∏î‡∏á metadata ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô: version, status, approvedBy, approvedAt, effectiveFrom, effectiveTo, changeReason
   - ‚úÖ Display fields ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞ data type (FAB Cost, Standard Price, Selling Factor, LME, Exchange Rate)
   - ‚úÖ Rollback button ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Archived versions ‡∏û‡∏£‡πâ‡∏≠‡∏° confirmation dialog
   - ‚úÖ Thai Buddhist calendar date formatting
   - ‚úÖ Error/Loading states ‡∏û‡∏£‡πâ‡∏≠‡∏° spinner ‡πÅ‡∏•‡∏∞ error messages
   - ‚úÖ Responsive design ‡πÅ‡∏•‡∏∞ professional UI
   - ‚úÖ Icons ‡∏à‡∏≤‡∏Å lucide-react (X, Clock, CheckCircle, Archive, RotateCcw, AlertCircle)

2. **History Button Integration** (`client/src/pages/MasterData.tsx` v7.0 ‚Üí v7.1)
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° History button (üïê icon) ‡πÉ‡∏ô 3 Master Data tables:
     - FAB Cost Table
     - Standard Price Table
     - Selling Factor Table
   - ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `handleViewHistory()` ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î VersionHistoryModal ‡πÅ‡∏ó‡∏ô old custom modal
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° state: `showVersionHistory`, `selectedRecord` ‡πÉ‡∏ô 3 components
   - ‚úÖ Rollback success callback ‚Üí refresh data ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á success message
   - ‚úÖ Import VersionHistoryModal component

3. **Centralized API Methods** (`client/src/services/api.ts` v3.0 ‚Üí v4.0)
   - ‚úÖ `getVersionHistory(dataType, recordId)` - ‡∏î‡∏∂‡∏á version history ‡∏à‡∏≤‡∏Å backend
   - ‚úÖ `approveVersion(dataType, recordId, username)` - Approve Draft ‚Üí Active
   - ‚úÖ `rollbackVersion(dataType, recordId, username)` - Rollback Archived ‚Üí Draft ‡πÉ‡∏´‡∏°‡πà
   - ‚úÖ `archiveVersion(dataType, recordId, username)` - Archive Active manually
   - ‚úÖ Endpoint mapping ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 5 Master Data types: `fabCost`, `standardPrice`, `sellingFactor`, `lme`, `exchangeRate`
   - ‚úÖ JWT token injection ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ú‡πà‡∏≤‡∏ô axios interceptor
   - ‚úÖ Error response handling (axios) ‡∏û‡∏£‡πâ‡∏≠‡∏° `err.response?.data?.message`
   - ‚úÖ Export both default ‡πÅ‡∏•‡∏∞ named exports

#### Backend (Already Ready)
- ‚úÖ Rollback API endpoints ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (5 endpoints): `POST /api/data/{type}/rollback/:id`
- ‚úÖ Version Control validation: BadRequestException ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö invalid operations
- ‚úÖ Archive logic: Auto-archive Active versions ‡πÄ‡∏°‡∏∑‡πà‡∏≠ approve version ‡πÉ‡∏´‡∏°‡πà
- ‚úÖ Delete logic: ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏•‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Draft records ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

#### Dependencies
- ‚úÖ ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á `lucide-react` package ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö icons

### Changed
- ‚ôªÔ∏è MasterData.tsx: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `handleViewHistory()` ‡∏à‡∏≤‡∏Å async fetch ‚Üí open VersionHistoryModal
- ‚ôªÔ∏è VersionHistoryModal: ‡πÉ‡∏ä‡πâ centralized API methods ‡πÅ‡∏ó‡∏ô fetch API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

### Technical Details
**Timeline View Implementation:**
```tsx
// Version dots with connecting lines
<div className="relative">
  {versions.map((version, index) => (
    <div key={version.id} className="relative pb-8 last:pb-0">
      {/* Timeline line */}
      {index < versions.length - 1 && (
        <div className="absolute left-5 top-10 bottom-0 w-0.5 bg-gray-200" />
      )}

      {/* Version dot */}
      <div className="relative z-10 flex items-center justify-center w-10 h-10 rounded-full">
        <span>v{version.version}</span>
      </div>

      {/* Version card */}
      <div className="flex-1 bg-gray-50 rounded-lg p-4">
        {/* Content */}
      </div>
    </div>
  ))}
</div>
```

**API Methods Pattern:**
```typescript
export const getVersionHistory = async (dataType: string, recordId: string) => {
  const endpoints = {
    fabCost: '/api/data/fab-costs',
    standardPrice: '/api/data/standard-prices',
    // ... 3 more types
  };
  const endpoint = endpoints[dataType];
  const response = await api.get(`${endpoint}/history/${recordId}`);
  return response.data;
};
```

### Known Issues / Pending
- ‚è≥ Error Handling UI: ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ `alert()` ‡∏≠‡∏¢‡∏π‡πà ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô toast notifications
- ‚è≥ Testing: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô browser ‡∏à‡∏£‡∏¥‡∏á
- ‚è≥ LME & Exchange Rate tables: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ History button (‡πÉ‡∏ä‡πâ MasterDataTable ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤)

### Files Created/Modified
- ‚úÖ `client/src/components/VersionHistoryModal.tsx` (NEW - 398 lines)
- ‚úÖ `client/src/pages/MasterData.tsx` (MODIFIED - added History integration)
- ‚úÖ `client/src/services/api.ts` (MODIFIED - added 4 API methods + 90 lines)
- ‚úÖ `PROJECT_DOCUMENTATION.md` (UPDATED - Phase 1 status)
- ‚úÖ `package.json` (client): Added `lucide-react` dependency

## [6.4] - 2025-10-28

### Added
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° `secondaryKey` ‡πÉ‡∏´‡πâ SearchableSelect ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á label ‡πÅ‡∏ö‡∏ö `CODE - ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô` ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏±‡πâ‡∏á code, id, name
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á hook `useCurrencies` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á Master Data ‡∏Ç‡∏≠‡∏á‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏° fallback list ‡πÄ‡∏°‡∏∑‡πà‡∏≠ API ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß

### Changed
- ‚ôªÔ∏è ‡∏´‡∏ô‡πâ‡∏≤ Master Data (LME & Exchange Rate) ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å Master Data ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏ö‡∏™‡∏ô "Thai Baht"
- ‚ôªÔ∏è ‡∏´‡∏ô‡πâ‡∏≤ Create Request ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏•‡∏≤‡∏á, ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô THB, ‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏´‡∏•‡∏î/‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
- ‚ôªÔ∏è Price Calculation Service/Module ‡∏î‡∏∂‡∏á Currency Repository ‡∏°‡∏≤ validate ‡∏£‡∏´‡∏±‡∏™, ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏°‡∏µ Exchange Rate THB ‚Üí ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏¥‡∏Å‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ default ‡πÅ‡∏ö‡∏ö hardcode
- ‚ôªÔ∏è ‡∏õ‡∏£‡∏±‡∏ö PriceRequestList ‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡πá‡∏ö context menu ‡∏û‡∏£‡πâ‡∏≠‡∏° status ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡πÅ‡∏•‡∏∞ disable ‡∏õ‡∏∏‡πà‡∏° View Pricing ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô Draft

### Fixed
- üîí ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô Costing ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤ Pricing View ‡∏à‡∏≤‡∏Å Draft request (‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏∏‡πà‡∏° action ‡πÅ‡∏•‡∏∞ context menu)
- üîÑ ‡∏õ‡∏£‡∏±‡∏ö PriceCalculator ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ backend ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ (fallback ‡πÄ‡∏õ‡πá‡∏ô 0/THB)

### Known Issues / Pending
- ‚è≥ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ unit test ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏° logic ‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏≠‡∏á SearchableSelect (`secondaryKey`, ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏•‡∏≤‡∏¢‡∏ü‡∏¥‡∏•‡∏î‡πå)
- ‚è≥ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ automated test ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î‡∏õ‡∏∏‡πà‡∏° View Pricing ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Draft
- ‚è≥ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Exchange Rate (THB ‚Üí ‡∏≠‡∏∑‡πà‡∏ô‡πÜ) ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡πÉ‡∏ô Master Data ‡πÑ‡∏°‡πà‡πÄ‡∏ä‡πà‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∞ Error (`NotFoundException`)
- ‚è≥ ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö Manual UI ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà reuse SearchableSelect (‡∏£‡∏ß‡∏° Settings / Pricing Master) ‡∏´‡∏•‡∏±‡∏á refactor ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î

## [6.3] - 2025-10-27

### Fixed - Remove FAB Cost (Product) ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° Currency Master Data ‚úÖ

**Issues Fixed**:
1. FAB Cost (Product) ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ RM FAB Cost)
2. Currency dropdown ‡πÉ‡∏ô Master Data ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£ seed
3. ‚úÖ LME Price ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ THB (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç seeder ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ THB ‡πÅ‡∏ó‡∏ô USD)

#### Backend Changes

1. **Price Calculation Service** ([price-calculation.service.ts](server/src/price-calculation/price-calculation.service.ts))
   - ‚ùå **Comment out FAB Cost (Product)** ‡πÉ‡∏ô‡∏ó‡∏±‡πâ‡∏á 2 methods:
     - `calculatePrice()` (line 232-239)
     - `calculatePriceWithHybridSystem()` (line 436-440)
   - ‚úÖ Set `fabCost = 0` ‡πÅ‡∏•‡∏∞ `fabCostPerUnit = 0` ‡πÅ‡∏ó‡∏ô
   - ‚úÖ Total Cost ‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏° FAB Cost (Product) ‡πÅ‡∏•‡πâ‡∏ß
   - **‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•**: FAB Cost (Product) ‡πÄ‡∏õ‡πá‡∏ô general cost ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ filter ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
   - **‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á**: RM FAB Cost (Raw Material Fabrication Cost) ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö LME Price

2. **Database Seeder** ([seeder.service.ts](server/src/database/seeder.service.ts) v1.2 ‚Üí v1.3)
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° `Currency` entity import
   - ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° `currencyRepository` injection
   - ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á method `seedCurrencies()` ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô 6 ‡∏ï‡∏±‡∏ß:
     - THB (Thai Baht) ‡∏ø
     - USD (US Dollar) $
     - EUR (Euro) ‚Ç¨
     - JPY (Japanese Yen) ¬•
     - CNY (Chinese Yuan) ¬•
     - SGD (Singapore Dollar) S$
   - ‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `seedCurrencies()` ‡∏Å‡πà‡∏≠‡∏ô `seedMasterData()` ‡πÉ‡∏ô `seed()` method
   - ‚úÖ **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç LME Master Data ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ THB ‡πÅ‡∏ó‡∏ô USD**:
     - Aluminum: 79,200 THB/kg (‡πÄ‡∏î‡∏¥‡∏° 2,200 USD/kg)
     - Copper: 324,000 THB/kg (‡πÄ‡∏î‡∏¥‡∏° 9,000 USD/kg)
   - ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô status ‡∏à‡∏≤‡∏Å 'Approved' ‡πÄ‡∏õ‡πá‡∏ô 'Active' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö query

3. **Data Service** ([data.service.ts](server/src/data/data.service.ts))
   - ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `updateStandardPrice()` method ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ FK constraint error
   - ‚úÖ Wrap save operation ‡∏î‡πâ‡∏ß‡∏¢ `PRAGMA foreign_keys OFF/ON`
   - ‚úÖ ‡πÉ‡∏ä‡πâ try-finally block ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
   - **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ**: `SQLITE_CONSTRAINT: FOREIGN KEY constraint failed` ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Standard Price ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Currency

#### Currency Data Source
- ‚úÖ ‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á 6 ‡∏ï‡∏±‡∏ß‡∏ñ‡∏π‡∏Å seed ‡∏ú‡πà‡∏≤‡∏ô `seedCurrencies()` method
- ‚úÖ ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á `currencies` (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà System Config)
- ‚úÖ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô API endpoint: `/api/data/currencies`
- ‚úÖ Frontend ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô SearchableSelect component

#### Expected Results
- ‚úÖ Currency dropdown ‡πÉ‡∏ô Master Data ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á 6 ‡∏ï‡∏±‡∏ß
- ‚úÖ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏° FAB Cost (Product) ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ
- ‚úÖ ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ LME Price + RM FAB Cost ‡∏´‡∏£‡∏∑‡∏≠ Standard Price ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- ‚úÖ LME Price ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ THB (THB ‡πÄ‡∏õ‡πá‡∏ô base currency ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö)

#### Files Modified
- `server/src/price-calculation/price-calculation.service.ts` (v3.3 ‚Üí v3.4)
- `server/src/database/seeder.service.ts` (v1.2 ‚Üí v1.3)
- `server/src/data/data.service.ts` (updateStandardPrice method - lines 559-599)
- `client/src/pages/MasterData.tsx` (v6.0 ‚Üí v6.1)

## [6.2] - 2025-10-21

### Fixed - Customer Group Pricing via CustomerMapping ‚úÖ

**Issue**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ CustomerMapping ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° customerGroupId ‡πÉ‡∏ô Customer

**User Clarification**:
> "customer group ‡∏Ñ‡∏∑‡∏≠‡∏ó‡∏µ‡πà map ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ master data ‡∏ô‡∏∞ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å customer ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö new request ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏≠‡∏≤ customer ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏õ‡∏´‡∏≤‡∏à‡∏≤‡∏Å mapping ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô master data ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤
> ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• customer group ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
> customer ‡∏à‡∏∞‡πÇ‡∏î‡∏ô‡∏î‡∏∂‡∏á‡πÄ‡∏õ‡πá‡∏ô master data ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å mongo db"

**Root Cause**:
1. Customer entity ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ `customerGroupId` (sync ‡∏°‡∏≤‡∏à‡∏≤‡∏Å MongoDB)
2. ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ CustomerMapping entity ‡πÄ‡∏û‡∏∑‡πà‡∏≠ map Customer ‚Üí Customer Group
3. Frontend ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á Customer Group ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤

#### Backend Changes

1. **Reverted Customer Entity** ([customer.entity.ts](server/src/entities/customer.entity.ts))
   - ‡∏•‡∏ö `customerGroupId` field ‡∏≠‡∏≠‡∏Å (‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ sync ‡∏à‡∏≤‡∏Å MongoDB)
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° comment ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ CustomerMapping

2. **Updated Service**: `PriceCalculationService` ([price-calculation.service.ts](server/src/price-calculation/price-calculation.service.ts) v2.3 ‚Üí v2.5)
   - ‡∏î‡∏∂‡∏á Customer Group ‡∏à‡∏≤‡∏Å **CustomerMapping** ‡πÅ‡∏ó‡∏ô Customer
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° `customerGroupName` ‡πÉ‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° logging ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ mapping

3. **Updated Module**: `PriceCalculationModule` ([price-calculation.module.ts](server/src/price-calculation/price-calculation.module.ts) v4.1 ‚Üí v4.2)
   - ‡πÉ‡∏ä‡πâ `CustomerMapping` ‡πÅ‡∏ó‡∏ô `Customer`

4. **Updated Interface**: `CalculationResult`
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° `customerGroupId?: string`
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° `customerGroupName?: string`

#### Frontend Changes

1. **Updated Component**: `PriceCalculator` ([PriceCalculator.tsx](client/src/components/PriceCalculator.tsx) v2.1 ‚Üí v2.2)
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° Customer Group fields ‡πÉ‡∏ô interface
   - **‡πÅ‡∏™‡∏î‡∏á Customer Group Badge** ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

#### Customer Group Pricing Flow

```
1. User ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Customer ‚Üí customerId = "CUST-001"
2. Frontend ‡∏™‡πà‡∏á customerId ‡πÑ‡∏õ Backend
3. Backend ‡∏´‡∏≤ CustomerMapping:
   SELECT * FROM customer_mappings
   WHERE customerId = "CUST-001" AND isActive = true
4. Backend ‡∏î‡∏∂‡∏á customerGroupId = "CG-VIP"
5. Backend ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡πâ‡∏ß‡∏¢ CG-VIP pricing
6. Frontend ‡πÅ‡∏™‡∏î‡∏á "üë• Customer Group: VIP Customers (CG-VIP)"
```

#### Why Use CustomerMapping?

‚úÖ **Correct**: CustomerMapping
- Customer sync ‡∏°‡∏≤‡∏à‡∏≤‡∏Å MongoDB (‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÅ‡∏Å‡πâ schema)
- Flexible: Map ‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö
- Auditable: ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ mapping

‚ùå **Wrong**: ‡πÄ‡∏û‡∏¥‡πà‡∏° customerGroupId ‡πÉ‡∏ô Customer
- Data ‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠ sync ‡πÉ‡∏´‡∏°‡πà
- ‡πÅ‡∏Å‡πâ schema ‡∏Ç‡∏≠‡∏á External Data

#### Technical Details
- TypeScript compilation: ‚úÖ Passed
- Backend build: ‚úÖ Successful
- Database: ‚úÖ ‡πÉ‡∏ä‡πâ CustomerMapping ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
- Breaking changes: ‚ùå None

---

## [6.1] - 2025-10-21

### Fixed - Price Calculation: Raw Material FAB Cost Support üîß

**Issue**: FAB Cost ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ö‡∏ß‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö LME Price ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô

**User Clarification**:
> "FAB Cost ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö LME ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤ RM ‡∏û‡∏ß‡∏Å ‡∏ó‡∏≠‡∏á‡πÅ‡∏î‡∏á ‡∏ô‡∏∞"

**Root Cause**:
- ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏µ FAB Cost ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á Product (costPerHour)
- ‡πÑ‡∏°‡πà‡∏°‡∏µ FAB Cost ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Raw Material ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß
- ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤ RM ‡∏à‡∏≤‡∏Å LME ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ö‡∏ß‡∏Å FAB Cost

#### Backend Changes

**New Entity**: `RawMaterialFabCost` ([raw-material-fab-cost.entity.ts](server/src/entities/raw-material-fab-cost.entity.ts) v1.0)
- ‡πÄ‡∏Å‡πá‡∏ö FAB Cost ‡∏Ç‡∏≠‡∏á Raw Material ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß
- ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö LME Price ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤ RM ‡∏à‡∏£‡∏¥‡∏á
- Fields:
  - `rawMaterialId`: Raw Material ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
  - `fabCost`: FAB Cost per unit (USD)
  - `unit`: ‡∏´‡∏ô‡πà‡∏ß‡∏¢ (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö LME Price)
  - `customerGroupId`: Optional - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö customer-specific pricing
  - `description`: ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô "‡∏Ñ‡πà‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏π‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ú‡πà‡∏ô")
- Inherits from `VersionedEntity`: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö versioning, approval workflow, effective dates

**Updated Service**: `PriceCalculationService` ([price-calculation.service.ts](server/src/price-calculation/price-calculation.service.ts) v2.2 ‚Üí v2.3)

1. **New Method**: `getRawMaterialFabCost()`
   ```typescript
   private async getRawMaterialFabCost(
     rawMaterialId: string,
     customerGroupId?: string,
   ): Promise<number>
   ```
   - ‡∏î‡∏∂‡∏á FAB Cost ‡∏Ç‡∏≠‡∏á Raw Material
   - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Customer Group specific pricing
   - Default = 0 ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤

2. **Updated Method**: `calculateMaterialCosts()`
   ```typescript
   // ‚úÖ ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏ú‡∏¥‡∏î)
   if (lmePrice !== null) {
     unitPrice = lmePrice;  // ‚ùå ‡∏Ç‡∏≤‡∏î FAB Cost
   }

   // ‚úÖ ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)
   if (lmePrice !== null) {
     unitPrice = lmePrice + rmFabCost;  // ‚úÖ Unit Price = LME + FAB
   }
   ```

3. **Updated Interface**: `MaterialCostDetail`
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° field `rmFabCost?: number` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á FAB Cost ‡πÉ‡∏ô response

**Updated Module**: `AppModule` ([app.module.ts](server/src/app.module.ts))
- Register `RawMaterialFabCost` entity
- Inject `RawMaterialFabCostRepository` ‡πÉ‡∏ô PriceCalculationService

#### Pricing Formula (Updated)

```typescript
// ‚ùå ‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏î‡∏¥‡∏° (‡∏ú‡∏¥‡∏î)
if (lmePrice !== null) {
  unitPrice = lmePrice
} else if (standardPrice !== null) {
  unitPrice = standardPrice
}

// ‚úÖ ‡∏™‡∏π‡∏ï‡∏£‡πÉ‡∏´‡∏°‡πà (‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)
if (lmePrice !== null) {
  rmFabCost = await getRawMaterialFabCost(rawMaterialId, customerGroupId)
  unitPrice = lmePrice + rmFabCost  // LME + FAB Cost
} else if (standardPrice !== null) {
  unitPrice = standardPrice  // Standard Price ‡∏£‡∏ß‡∏° FAB Cost ‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß
}

// Material Cost = Œ£(BOQ Quantity √ó Unit Price √ó Product Quantity)
```

#### Example Calculation

**Raw Material: Copper Sheet**
```typescript
// Input
LME Price (Copper) = 8.50 USD/KG
FAB Cost (Copper Sheet) = 1.20 USD/KG  // ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏π‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ú‡πà‡∏ô
BOQ Quantity = 2.5 KG
Product Quantity = 10 Units

// Calculation
Unit Price = 8.50 + 1.20 = 9.70 USD/KG  // ‚úÖ LME + FAB
Material Cost = 2.5 √ó 9.70 √ó 10 = 242.50 USD

// ‚ùå ‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏î‡∏¥‡∏° (‡∏ú‡∏¥‡∏î): 2.5 √ó 8.50 √ó 10 = 212.50 USD (‡∏ï‡πà‡∏≥‡πÑ‡∏õ 30 USD)
```

#### API Response Changes

**New Field in MaterialCostDetail**:
```json
{
  "materialCosts": [
    {
      "rawMaterialId": "RM-COPPER",
      "rawMaterialName": "Copper Sheet",
      "boqQuantity": 2.5,
      "unitPrice": 9.70,
      "lmePrice": 8.50,
      "rmFabCost": 1.20,  // ‚úÖ ‡πÉ‡∏´‡∏°‡πà - ‡πÅ‡∏™‡∏î‡∏á FAB Cost
      "priceSource": "LME",
      "totalCost": 242.50
    }
  ]
}
```

#### Features
- ‚úÖ **Customer Group Specific FAB Cost**: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ FAB Cost ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ï‡∏≤‡∏° Customer Group
- ‚úÖ **Master Data Versioning**: ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á FAB Cost
- ‚úÖ **Approval Workflow**: Draft ‚Üí Active (‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)
- ‚úÖ **Default Value**: ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ FAB Cost = 0 (‡πÑ‡∏°‡πà error)

#### Technical Details
- TypeScript compilation: ‚úÖ Passed
- Backend build: ‚úÖ Successful
- Breaking changes: ‚ùå None (backward compatible)
- Database migration: ‚úÖ Auto-create table (TypeORM sync)

---

## [6.0] - 2025-10-21

### Added - Phase 1: Manual Mapping UI + Item Status Badges ‚úÖ

#### Frontend: Manual Mapping UI
- **ItemMappingManager Component** (`client/src/components/ItemMappingManager.tsx` v1.0)
  - ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Costing Team ‡∏ó‡∏≥ Manual Mapping Dummy Items ‚Üí D365 Items
  - Features:
    - ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Pending Mappings (GET /api/dummy-items/pending-mappings)
    - Form ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏Å D365 Item ID ‡∏û‡∏£‡πâ‡∏≠‡∏° validation
    - ‡πÅ‡∏™‡∏î‡∏á Dummy Item details (ID, Name, Request ID, Customer PO, Status)
    - Success/Error feedback messages
    - Loading states ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö async operations
    - Auto-reload pending list ‡∏´‡∏•‡∏±‡∏á mapping ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
  - UI Layout:
    - Section 1: Header & Description
    - Section 2: Pending Mappings Table (Left side)
    - Section 3: Mapping Form (Right side)
  - API Integration:
    - GET /api/dummy-items/pending-mappings - ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠ mapping
    - POST /api/dummy-items/map-to-d365 - ‡∏ó‡∏≥ manual mapping
  - Validation:
    - D365 Item ID required (‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ß‡πà‡∏≤‡∏á)
    - Customer PO optional (pre-filled ‡∏à‡∏≤‡∏Å Dummy Item)
    - Notes optional (textarea ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏)

- **Master Data Integration** (`client/src/pages/MasterData.tsx` v5.1 ‚Üí v6.0)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° "Item Mapping" sub-tab ‡πÉ‡∏ô BOQ Management tab group
  - Navigation structure:
    - Master Data ‚Üí BOQ Management ‚Üí Item Mapping (‡πÉ‡∏´‡∏°‡πà)
    - ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á "Create/Edit BOQ" ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ sub-tab ‡∏≠‡∏∑‡πà‡∏ô
  - Import ItemMappingManager component

#### Frontend: Item Status Badges
- **ItemStatusBadge Component** (`client/src/components/ItemStatusBadge.tsx` v1.0)
  - Reusable badge component ‡πÅ‡∏™‡∏î‡∏á itemStatus ‡∏û‡∏£‡πâ‡∏≠‡∏° color coding
  - Status Configuration:
    - üü¢ AVAILABLE (Green): `bg-green-100`, `text-green-800`, `border-green-200`
    - üü° IN_USE (Yellow): `bg-yellow-100`, `text-yellow-800`, `border-yellow-200`
    - üîµ MAPPED (Blue): `bg-blue-100`, `text-blue-800`, `border-blue-200`
    - ‚ö´ REPLACED (Gray): `bg-gray-100`, `text-gray-800`, `border-gray-200`
    - üü£ PRODUCTION (Purple): `bg-purple-100`, `text-purple-800`, `border-purple-200`
  - Props:
    - `status`: string (required) - item status
    - `size`: 'sm' | 'md' | 'lg' (optional, default: 'md')
    - `showIcon`: boolean (optional, default: true)
  - Size Classes:
    - sm: `text-xs px-2 py-0.5`
    - md: `text-sm px-2.5 py-1`
    - lg: `text-base px-3 py-1.5`

- **BOQViewer Integration** (`client/src/components/BOQViewer.tsx` v1.0 ‚Üí v1.1)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° `itemStatus` field ‡πÉ‡∏ô Product interface
  - Integration Point 1: Product List (Left sidebar)
    - ‡πÅ‡∏™‡∏î‡∏á ItemStatusBadge ‡∏Ç‡πâ‡∏≤‡∏á‡πÜ "Has BOQ" badge
    - Size: sm
    - Layout: `flex flex-wrap gap-2`
  - Integration Point 2: BOQ Header (Right panel)
    - ‡πÅ‡∏™‡∏î‡∏á ItemStatusBadge ‡∏Ç‡πâ‡∏≤‡∏á‡πÜ Product Source badge
    - Size: md
    - Layout: `flex flex-col gap-2 items-end`

- **CreateRequest Integration** (`client/src/pages/CreateRequest.tsx` v4.0 ‚Üí v4.1)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° `itemStatus` field ‡πÉ‡∏ô Product interface
  - Integration Point 1: Product Search Results (Dropdown)
    - ‡πÅ‡∏™‡∏î‡∏á ItemStatusBadge ‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
    - Size: sm
    - Layout: `flex items-center justify-between`
  - Integration Point 2: Selected Product Display (Blue box)
    - ‡πÅ‡∏™‡∏î‡∏á ItemStatusBadge ‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß"
    - Size: sm
    - ‡πÉ‡∏ä‡πâ IIFE ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤ itemStatus ‡∏à‡∏≤‡∏Å products array

### Features ‚ú®
- ‚úÖ **Manual Mapping Workflow**: Costing Team ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ map Dummy Item ‚Üí D365 Item ‡πÑ‡∏î‡πâ‡∏ú‡πà‡∏≤‡∏ô UI
- ‚úÖ **Pending Mappings View**: ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Dummy Items ‡∏ó‡∏µ‡πà‡∏£‡∏≠ mapping ‡∏û‡∏£‡πâ‡∏≠‡∏° details
- ‚úÖ **Form Validation**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö D365 Item ID ‡∏Å‡πà‡∏≠‡∏ô submit
- ‚úÖ **Success/Error Feedback**: ‡πÅ‡∏™‡∏î‡∏á message ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏´‡∏•‡∏±‡∏á mapping
- ‚úÖ **Auto-Reload**: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ pending ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏á mapping ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- ‚úÖ **Item Status Visibility**: ‡πÅ‡∏™‡∏î‡∏á status badges ‡∏ó‡∏∏‡∏Å‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á Product
- ‚úÖ **Consistent UX**: Badge component reusable ‡∏ó‡∏±‡πà‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö
- ‚úÖ **Color-Coded Status**: ‡πÅ‡∏¢‡∏Å status ‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏µ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô (Green/Yellow/Blue/Gray/Purple)
- ‚úÖ **Responsive Design**: ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏ó‡∏±‡πâ‡∏á desktop ‡πÅ‡∏•‡∏∞ mobile

### Technical Details üîß
- **New Files Created** (2 files):
  - `client/src/components/ItemMappingManager.tsx` (v1.0, 523 lines)
  - `client/src/components/ItemStatusBadge.tsx` (v1.0, 70 lines)

- **Files Modified** (3 files):
  - `client/src/pages/MasterData.tsx` (v5.1 ‚Üí v6.0, +2 lines)
  - `client/src/components/BOQViewer.tsx` (v1.0 ‚Üí v1.1, +25 lines)
  - `client/src/pages/CreateRequest.tsx` (v4.0 ‚Üí v4.1, +20 lines)

- **Backend Files**: ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç - Backend APIs ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (v5.8)

- **TypeScript Status**: ‚úÖ No compilation errors (tsc --noEmit passed)

- **Dependencies**: ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° dependencies ‡πÉ‡∏´‡∏°‡πà

### Implementation Checklist ‚úÖ
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á ItemStatusBadge component
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° badges ‡πÉ‡∏ô BOQViewer (Product List + BOQ Header)
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° badges ‡πÉ‡∏ô CreateRequest (Search Results + Selected Display)
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á ItemMappingManager component (Manual Mapping UI)
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° Item Mapping sub-tab ‡πÉ‡∏ô MasterData (BOQ Management)
- ‚úÖ TypeScript compilation ‡∏ú‡πà‡∏≤‡∏ô (no errors)
- ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï CHANGELOG.md

### Workflow Example üîÑ
```bash
# 1. Costing Team ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤ Manual Mapping
Master Data ‚Üí BOQ Management ‚Üí Item Mapping

# 2. ‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Dummy Items ‡∏ó‡∏µ‡πà‡∏£‡∏≠ mapping
GET /api/dummy-items/pending-mappings
‚Üí ‡πÅ‡∏™‡∏î‡∏á: FG-DUMMY-001 (Status: IN_USE, Request: REQ-001, PO: PO-2025-001)

# 3. Costing Team ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å FG-DUMMY-001
‚Üí Form ‡πÅ‡∏™‡∏î‡∏á Dummy Item details
‚Üí ‡∏Å‡∏£‡∏≠‡∏Å D365 Item ID: "D365-FG-5001"
‚Üí ‡∏Å‡∏£‡∏≠‡∏Å Notes: "Production created based on PO-2025-001"

# 4. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "Map to D365"
POST /api/dummy-items/map-to-d365
Body: {
  dummyItemId: 'FG-DUMMY-001',
  d365ItemId: 'D365-FG-5001',
  customerPO: 'PO-2025-001',
  notes: 'Production created based on PO-2025-001'
}

# 5. ‡πÅ‡∏™‡∏î‡∏á Success Message
‚úÖ Mapped FG-DUMMY-001 ‚Üí D365-FG-5001 successfully!

# 6. Reload pending list
‚Üí FG-DUMMY-001 ‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (itemStatus: IN_USE ‚Üí MAPPED)
‚Üí Badge ‡πÉ‡∏ô BOQViewer ‡πÅ‡∏•‡∏∞ CreateRequest ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏õ‡πá‡∏ô "Mapped" (‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô)
```

### Benefits üéØ
- üéØ **Complete Phase 1**: Manual Mapping UI ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô 100%
- üéØ **Better UX**: Costing Team ‡∏ó‡∏≥ mapping ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏ú‡πà‡∏≤‡∏ô UI (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á)
- üéØ **Status Visibility**: ‡πÄ‡∏´‡πá‡∏ô item status ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
- üéØ **Validation**: ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô mapping ‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏î‡πâ‡∏ß‡∏¢ form validation
- üéØ **Feedback**: ‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ß‡πà‡∏≤ mapping ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- üéØ **Maintainable Code**: Component reusable ‡πÅ‡∏•‡∏∞ well-structured
- üéØ **TypeScript Safe**: ‡πÑ‡∏°‡πà‡∏°‡∏µ compilation errors

### Breaking Changes
- ‡πÑ‡∏°‡πà‡∏°‡∏µ breaking changes
- ‡∏ó‡∏∏‡∏Å features ‡πÄ‡∏õ‡πá‡∏ô opt-in (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤ Item Mapping ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)
- Backend APIs ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á

### Next Steps (Phase 2-3 - Future)
- ‚è≥ Design D365 API Integration Interface
- ‚è≥ Create "Ready for D365" validation endpoint
- ‚è≥ Design Retry Mechanism
- ‚è≥ Implement Auto-Creation API
- ‚è≥ Auto-Creation UI Dashboard

---

## [5.8] - 2025-10-14

### Added - Dummy Item & BOQ Lifecycle Management üè∑Ô∏è

#### Backend: Database Schema & API
- **Product Entity** (`server/src/entities/product.entity.ts` v3.0 ‚Üí v4.0)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° Dummy Item Lifecycle Fields (10 fields):
    - `itemStatus`: 'AVAILABLE' | 'IN_USE' | 'MAPPED' | 'REPLACED' | 'PRODUCTION'
    - `isUsed`: true = ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Request ‡πÅ‡∏•‡πâ‡∏ß
    - `linkedRequestId`: Request ID ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ Dummy Item ‡∏ô‡∏µ‡πâ
    - `linkedDummyId`: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production Item ‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏à‡∏≤‡∏Å Dummy
    - `d365ItemId`: Item ID ‡πÉ‡∏ô D365 (‡πÄ‡∏°‡∏∑‡πà‡∏≠ Production ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß)
    - `replacedByD365Id`: D365 Item ID ‡∏ó‡∏µ‡πà‡∏°‡∏≤‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà Dummy ‡∏ô‡∏µ‡πâ
    - `mappedDate`: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà Costing Team ‡∏ó‡∏≥ Manual Mapping
    - `mappedBy`: User ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥ Mapping
    - `customerPO`: Customer PO ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
    - `awaitingD365Creation`: true = ‡∏£‡∏≠ Production ‡∏™‡∏£‡πâ‡∏≤‡∏á Item ‡πÉ‡∏ô D365
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° Future-Ready Fields (‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ Auto-Creation):
    - `isPushedToD365`: true = ‡∏ñ‡∏π‡∏Å‡∏¢‡∏¥‡∏á API ‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô D365 ‡πÅ‡∏•‡πâ‡∏ß
    - `d365CreationDate`: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô D365
    - `d365CreationMethod`: 'MANUAL' | 'AUTO_API' | 'PRODUCTION_TEAM'
    - `autoCreationFailed`: true = API ‡∏¢‡∏¥‡∏á‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
    - `autoCreationError`: error message ‡∏à‡∏≤‡∏Å D365 API

- **BOM Entity** (`server/src/entities/bom.entity.ts` v3.0 ‚Üí v4.0)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° BOQ Lifecycle Fields (5 fields):
    - `bomStatus`: 'DRAFT' | 'PRODUCTION' | 'ARCHIVED'
    - `copiedFrom`: BOQ ID ‡∏ó‡∏µ‡πà Copy ‡∏°‡∏≤ (D365 Master ‡∏´‡∏£‡∏∑‡∏≠ Dummy ‡∏≠‡∏∑‡πà‡∏ô)
    - `linkedDummyBomId`: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production BOQ ‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏à‡∏≤‡∏Å Dummy BOQ
    - `linkedD365BomId`: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Dummy BOQ ‡∏ó‡∏µ‡πà Copy ‡∏à‡∏≤‡∏Å D365 Master
    - `archivedDate`: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà BOQ ‡∏ñ‡∏π‡∏Å Archive
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° Future-Ready Fields:
    - `isPushedToD365`: BOQ ‡∏ñ‡∏π‡∏Å‡∏¢‡∏¥‡∏á‡πÑ‡∏õ D365 ‡πÅ‡∏•‡πâ‡∏ß
    - `d365BomCreationDate`: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á BOQ ‡πÉ‡∏ô D365

- **Dummy Items Module** (`server/src/dummy-items/`)
  - **DummyItemsService** (`dummy-items.service.ts` v1.1):
    - `ensureDummyItemsAvailable()`: ‡∏™‡∏£‡πâ‡∏≤‡∏á Dummy Items ‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ (MIN: 20 items)
    - `getAvailableDummyItems()`: ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Dummy Items ‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
    - `generateDummyItems(count)`: ‡∏™‡∏£‡πâ‡∏≤‡∏á Dummy Items ‡πÉ‡∏´‡∏°‡πà (FG-DUMMY-001, 002, 003...)
    - `getNextDummyItemId()`: ‡∏´‡∏≤ running number ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    - `mapDummyToD365()`: Manual Mapping Dummy Item ‚Üí D365 Item
    - `getPendingMappings()`: ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Dummy Items ‡∏ó‡∏µ‡πà‡∏£‡∏≠ Mapping
    - Background Job: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `ensureDummyItemsAvailable()` ‡∏ï‡∏≠‡∏ô `onModuleInit`
    - Note: Cron Job ‡∏ñ‡∏π‡∏Å disable ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å Node.js v18 crypto compatibility issue

  - **DummyItemsController** (`dummy-items.controller.ts` v1.0):
    - `GET /api/dummy-items/available` - ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Dummy Items ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
    - `POST /api/dummy-items/generate` - ‡∏™‡∏£‡πâ‡∏≤‡∏á Dummy Items ‡πÉ‡∏´‡∏°‡πà (Manual trigger)
    - `POST /api/dummy-items/map-to-d365` - Manual Mapping: Dummy ‚Üí D365
    - `GET /api/dummy-items/pending-mappings` - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠ Mapping
    - `POST /api/dummy-items/check-availability` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Dummy Items

  - **DummyItemsModule** (`dummy-items.module.ts` v1.1):
    - TypeORM integration ‡∏Å‡∏±‡∏ö Product entity
    - Export DummyItemsService ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô modules ‡∏≠‡∏∑‡πà‡∏ô
    - Note: ScheduleModule disabled (‡πÉ‡∏ä‡πâ manual trigger ‡πÅ‡∏ó‡∏ô Cron)

#### Features üéØ
- ‚úÖ **Auto-Generate Dummy Items**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á Dummy Items ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (FG-DUMMY-001, 002, 003...)
- ‚úÖ **Manual Mapping**: Costing Team map Dummy Item ‚Üí D365 Item ‡πÑ‡∏î‡πâ
- ‚úÖ **Lifecycle Tracking**: ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Dummy Item ‡∏ï‡∏•‡∏≠‡∏î lifecycle
- ‚úÖ **BOQ Copy**: Copy BOQ ‡∏à‡∏≤‡∏Å D365 Master ‡∏´‡∏£‡∏∑‡∏≠ Dummy ‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ
- ‚úÖ **Future-Ready**: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Auto-Creation API (Phase 2)
- ‚úÖ **History Tracking**: ‡πÄ‡∏Å‡πá‡∏ö history ‡πÅ‡∏•‡∏∞ mapping information
- ‚úÖ **Manual Trigger**: ‡πÉ‡∏ä‡πâ API trigger ‡πÅ‡∏ó‡∏ô Cron Job (Node v18 compatible)

#### Dummy Item Lifecycle Flow üîÑ
```
AVAILABLE (‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)
    ‚Üì
IN_USE (‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Request)
    ‚Üì
    ‚îú‚îÄ‚Üí [Manual Mapping] MAPPED (Costing map ‡∏Å‡∏±‡∏ö D365 Item)
    ‚îÇ                      ‚Üì
    ‚îÇ                   REPLACED (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß)
    ‚îÇ
    ‚îî‚îÄ‚Üí [Future: Auto API] AWAITING_D365_CREATION (‡∏£‡∏≠‡∏¢‡∏¥‡∏á API)
                             ‚Üì
                          MAPPED (‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)
                             ‚Üì
                          REPLACED (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß)
```

#### Technical Details
- **Backend Files Created** (3 files):
  - `server/src/dummy-items/dummy-items.service.ts` (v1.1, 193 lines)
  - `server/src/dummy-items/dummy-items.controller.ts` (v1.0, 130 lines)
  - `server/src/dummy-items/dummy-items.module.ts` (v1.1, 21 lines)

- **Backend Files Modified** (3 files):
  - `server/src/entities/product.entity.ts` (v3.0 ‚Üí v4.0, +15 fields)
  - `server/src/entities/bom.entity.ts` (v3.0 ‚Üí v4.0, +7 fields)
  - `server/src/app.module.ts` - ‡πÄ‡∏û‡∏¥‡πà‡∏° DummyItemsModule

- **Database Migration**:
  - TypeORM auto-sync ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (SQLite development mode)
  - ‡πÑ‡∏°‡πà‡∏°‡∏µ TypeScript compilation errors
  - Backend server ‡∏£‡∏±‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏ó‡∏µ‡πà http://localhost:3000

- **Dependencies Added**:
  - `@nestjs/schedule` (v4.x) - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Cron Jobs (‡∏ñ‡∏π‡∏Å disable ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)

#### Documentation üìö
- **DUMMY_ITEM_BOQ_LIFECYCLE_V2.md** - ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö lifecycle ‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
  - 9-phase complete lifecycle
  - Database schema design
  - API endpoints specification
  - UI/UX mockups
  - Implementation checklist

#### Important Notes ‚ö†Ô∏è
- **MongoDB as Data Source**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Finished Goods ‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å D365 ‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏ú‡πà‡∏≤‡∏ô MongoDB ‚Üí PriceCal (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á "Sync Production Items API" ‡πÅ‡∏¢‡∏Å)
- **Manual Mapping (Phase 1)**: ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ä‡πâ Manual Mapping ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- **Auto-Creation (Phase 2)**: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° fields ‡πÅ‡∏•‡∏∞ infrastructure ‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï
- **Cron Job Disabled**: ‡πÉ‡∏ä‡πâ manual trigger ‡∏ú‡πà‡∏≤‡∏ô `POST /api/dummy-items/check-availability` ‡πÅ‡∏ó‡∏ô
- **Node.js v18 Compatible**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç crypto issue ‡πÇ‡∏î‡∏¢ disable ScheduleModule

#### Workflow Example
```bash
# 1. Generate Dummy Items (Manual trigger)
POST /api/dummy-items/generate
Body: { count: 10 }

# 2. Get available Dummy Items
GET /api/dummy-items/available

# 3. Costing Team ‡πÉ‡∏ä‡πâ FG-DUMMY-001 ‡πÉ‡∏ô Request
# ... (Sales ‡∏™‡∏£‡πâ‡∏≤‡∏á Request, Costing ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤)

# 4. Production ‡∏™‡∏£‡πâ‡∏≤‡∏á Item ‡πÉ‡∏ô D365 (D365-FG-5001)
# 5. D365 ‚Üí MongoDB sync (auto)
# 6. MongoDB ‚Üí PriceCal sync
POST /api/import/finished-goods

# 7. Costing Team ‡∏ó‡∏≥ Manual Mapping
POST /api/dummy-items/map-to-d365
Body: {
  dummyItemId: 'FG-DUMMY-001',
  d365ItemId: 'D365-FG-5001',
  customerPO: 'PO-2025-001',
  notes: 'Production created based on PO-2025-001'
}

# 8. Check pending mappings
GET /api/dummy-items/pending-mappings
```

#### Benefits
- üéØ **Automated Dummy Item Management**: ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Dummy Items ‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠
- üéØ **Flexible Lifecycle**: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á Manual ‡πÅ‡∏•‡∏∞ Auto-creation (‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)
- üéØ **History Tracking**: ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ mapping ‡πÅ‡∏•‡∏∞ lifecycle
- üéØ **Scalable Design**: ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô Auto-creation API
- üéØ **Clean Separation**: ‡πÅ‡∏¢‡∏Å Dummy Items ‡πÅ‡∏•‡∏∞ Production Items ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- üéØ **MongoDB Integration**: ‡πÉ‡∏ä‡πâ MongoDB ‡πÄ‡∏õ‡πá‡∏ô primary data source

#### Implementation Checklist (3 Phases) üìã
**Phase 1: Manual Mapping (‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ)**
- ‚úÖ Database schema ‡∏û‡∏£‡πâ‡∏≠‡∏° (Product + BOM entities v4.0)
- ‚úÖ Manual Mapping API (POST /api/dummy-items/map-to-d365)
- [ ] Manual Mapping UI (‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Costing Team)
- [ ] Item status badges (‡πÅ‡∏™‡∏î‡∏á status ‡πÉ‡∏ô BOQViewer)

**Phase 2: Prepare for Auto-Creation**
- ‚úÖ Add future fields to entities (isPushedToD365, d365CreationMethod, etc.)
- [ ] Design D365 API integration interface
- [ ] Create "Ready for D365" validation
- [ ] Create retry mechanism design

**Phase 3: Auto-Creation (‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)**
- [ ] D365 API client service
- [ ] Push Item to D365 API
- [ ] Push BOQ to D365 API
- [ ] Error handling & retry logic
- [ ] Auto-creation UI

#### Future Enhancements (Phase 2-3)
- [ ] Auto-Creation API: ‡∏¢‡∏¥‡∏á API ‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á Item + BOQ ‡πÉ‡∏ô D365 ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- [ ] Item Mapping UI: ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Costing Team ‡∏ó‡∏≥ manual mapping
- [ ] BOQ Comparison View: ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö Dummy BOQ vs Production BOQ
- [ ] Warning Banners: ‡πÅ‡∏™‡∏î‡∏á warning ‡πÉ‡∏ô Create Request ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ Dummy Item
- [ ] Item Status Badges: ‡πÅ‡∏™‡∏î‡∏á status badges ‡πÉ‡∏ô BOQViewer
- [ ] Retry Mechanism: Retry ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö failed auto-creation

## [5.7] - 2025-10-14

### Added - BOQ Management System üìã
- **BOQViewer Component** (`client/src/components/BOQViewer.tsx` v1.0)
  - ‡∏´‡∏ô‡πâ‡∏≤‡∏î‡∏π BOQ (Bill of Quantities) ‡πÅ‡∏ö‡∏ö Read-only
  - ‡πÅ‡∏™‡∏î‡∏á BOQ ‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á D365 ‡πÅ‡∏•‡∏∞ PriceCal
  - Product List ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
  - ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Raw Materials ‡∏û‡∏£‡πâ‡∏≠‡∏° Quantity ‡πÅ‡∏•‡∏∞ Unit
  - ‡πÅ‡∏™‡∏î‡∏á Source Badge (D365 Read-only / PriceCal Editable)
  - ‡πÅ‡∏™‡∏î‡∏á Total Items ‡πÅ‡∏•‡∏∞ Total Quantity
  - Table view ‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏° notes

- **BOQEditor Component** (`client/src/components/BOQEditor.tsx` v1.0)
  - ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç BOQ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PriceCal Products
  - ‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç BOQ ‡∏à‡∏≤‡∏Å D365 (Read-only)
  - ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á BOQ ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Product ‡πÉ‡∏´‡∏°‡πà
  - ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç BOQ ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô PriceCal
  - ‚úÖ Copy BOQ ‡∏à‡∏≤‡∏Å Product ‡∏≠‡∏∑‡πà‡∏ô (Create Variation)
  - Modal Add/Edit BOQ Item ‡∏û‡∏£‡πâ‡∏≠‡∏° Raw Material selector
  - Quantity, Unit, Notes fields
  - Save BOQ ‡∏û‡∏£‡πâ‡∏≠‡∏° validation

- **BOQ Management Tab in Master Data** (`client/src/pages/MasterData.tsx` v5.0 ‚Üí v5.1)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° "üìã BOQ Management" tab ‡πÉ‡∏ô Master Data tabs
  - Sub-tabs:
    1. **View BOQ** - ‡∏î‡∏π BOQ ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (D365 + PriceCal)
    2. **Create/Edit BOQ** - ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç BOQ (PriceCal only)
  - Master Data tabs ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 6 ‚Üí 7 grouped tabs

### Changed - ImportManager Descriptions
- **ImportManager Component** (`client/src/components/ImportManager.tsx` v2.0 ‚Üí v2.1)
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏à‡∏≤‡∏Å "External API" ‚Üí "MongoDB Sync"
  - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å "API Settings" ‚Üí "MongoDB Sync" descriptions
  - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ MongoDB ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
  - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MongoDB connection ‡πÅ‡∏•‡∏∞ sync features

### Features üéØ
- ‚úÖ **View BOQ (Read-only)**: ‡∏î‡∏π BOQ ‡∏à‡∏≤‡∏Å D365 (‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ)
- ‚úÖ **Create BOQ**: ‡∏™‡∏£‡πâ‡∏≤‡∏á BOQ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Finished Goods ‡πÉ‡∏´‡∏°‡πà
- ‚úÖ **Edit BOQ**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç BOQ ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô PriceCal
- ‚úÖ **Copy BOQ**: Copy BOQ ‡∏à‡∏≤‡∏Å Product ‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Variation
- ‚úÖ **Hybrid BOQ Management**: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö D365 + PriceCal BOQ ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- ‚úÖ **Product Filtering**: Filter ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ PriceCal Products ‡πÉ‡∏ô Editor
- ‚úÖ **Raw Material Search**: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Raw Material ‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏° BOQ Item
- ‚úÖ **Validation**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô Save BOQ
- ‚úÖ **MongoDB Sync Info**: ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö MongoDB import

### Technical Details
- **Frontend Files Created** (2 files):
  - `client/src/components/BOQViewer.tsx` (v1.0, 330 lines)
  - `client/src/components/BOQEditor.tsx` (v1.0, 620 lines)
- **Frontend Files Modified** (2 files):
  - `client/src/pages/MasterData.tsx` (v5.0 ‚Üí v5.1)
  - `client/src/components/ImportManager.tsx` (v2.0 ‚Üí v2.1)

- **Backend APIs Used**:
  - `GET /api/data/products` - ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Products
  - `GET /api/data/raw-materials` - ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Raw Materials
  - `GET /api/bom/product/:productId` - ‡∏î‡∏∂‡∏á BOQ ‡∏Ç‡∏≠‡∏á Product
  - `POST /api/bom` - ‡∏™‡∏£‡πâ‡∏≤‡∏á BOQ Item ‡πÉ‡∏´‡∏°‡πà
  - `PUT /api/bom/:id` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï BOQ Item
  - `POST /api/bom/copy` - Copy BOQ ‡∏à‡∏≤‡∏Å Product ‡∏≠‡∏∑‡πà‡∏ô

- **BOQ Item Interface**:
  ```typescript
  interface BOQItem {
    id?: string;
    productId: string;
    rawMaterialId: string;
    quantity: number;
    unit: string;
    notes?: string;
    bomSource: string; // 'D365' | 'PRICECAL'
    isEditable: boolean;
  }
  ```

### BOQ Workflow üîÑ
1. **View BOQ**: ‡∏î‡∏π BOQ ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (D365 = Read-only, PriceCal = Editable)
2. **Create BOQ**: ‡∏™‡∏£‡πâ‡∏≤‡∏á BOQ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Product ‡πÉ‡∏´‡∏°‡πà
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Product (PriceCal only)
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° BOQ Items (Raw Material + Quantity + Unit)
   - Save BOQ
3. **Edit BOQ**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç BOQ ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô PriceCal
   - Load BOQ ‡∏à‡∏≤‡∏Å Product
   - Edit/Delete Items
   - Save changes
4. **Copy BOQ**: Copy BOQ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Variation
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Source Product
   - Copy ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Target Product
   - Edit ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

### Benefits
- üéØ **Complete BOQ Management**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ BOQ ‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£
- üéØ **Hybrid Support**: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö D365 + PriceCal BOQ
- üéØ **Easy Variation**: ‡∏™‡∏£‡πâ‡∏≤‡∏á Product Variation ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ Copy BOQ
- üéØ **Better UX**: UI ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÅ‡∏¢‡∏Å View/Edit ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- üéØ **Data Integrity**: ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç D365 BOQ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à
- üéØ **MongoDB Clarity**: ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ MongoDB Sync ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô

### Master Data Tabs Structure (7 tabs)
1. üîÑ **MongoDB Sync** (Import Data + View MongoDB Data)
2. üìã **BOQ Management** ‚ú® *NEW* (View BOQ + Create/Edit BOQ)
3. üë• **Customers** (Customer Groups + Customer Mappings)
4. üí∞ **Pricing Master** (Standard Prices + Fab Costs + Selling Factors)
5. üí± **Market Data** (LME Master Data + Exchange Rates)
6. ‚öôÔ∏è **System Config** (Currencies)
7. üìä **Activity Logs** (Activity Logs)

### TypeScript Status
- ‚úÖ **Clean Build**: No TypeScript errors (tsc --noEmit ‚úÖ)
- ‚úÖ **Type Safety**: All interfaces properly typed
- ‚úÖ **Import Resolution**: All imports resolved correctly

### Documentation
- üìö **HYBRID_BOQ_DESIGN.md** - ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö BOQ Hybrid System (‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å v5.3)

## [5.6.1] - 2025-10-14

### Fixed - MasterDataViewer Authentication Issue üîí
- **MasterDataViewer Component** (`client/src/components/MasterDataViewer.tsx` v1.1 ‚Üí v1.2)
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç 401 Unauthorized error ‡πÇ‡∏î‡∏¢‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å `fetch()` ‡πÄ‡∏õ‡πá‡∏ô centralized `api` instance
  - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô absolute URLs (`http://localhost:3000/api/...`) ‡πÄ‡∏õ‡πá‡∏ô relative paths (`/api/...`)
  - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å `fetch(endpoint)` ‡πÄ‡∏õ‡πá‡∏ô `api.get(endpoint)`
  - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å `response.json()` ‡πÄ‡∏õ‡πá‡∏ô `response.data` (axios format)
  - JWT token ‡∏ñ‡∏π‡∏Å‡πÅ‡∏ô‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å request ‡∏ú‡πà‡∏≤‡∏ô axios interceptor

### Impact
- ‚úÖ **Fixed**: Master Data ‚Üí View MongoDB Data ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î 401 error ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ
- ‚úÖ **Security**: JWT token ‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å API calls
- ‚úÖ **Consistency**: ‡∏ó‡∏∏‡∏Å components ‡πÉ‡∏ä‡πâ centralized API client ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô
- ‚úÖ **Complete API Migration**: Frontend 100% ‡πÉ‡∏ä‡πâ centralized `api` instance (13/13 files)

### Technical Details
- **Files Modified** (1 file):
  - `client/src/components/MasterDataViewer.tsx` (v1.1 ‚Üí v1.2)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° `import api from '../services/api'`
  - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô 4 endpoints ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å absolute ‡πÄ‡∏õ‡πá‡∏ô relative URLs
  - ‡πÉ‡∏ä‡πâ `api.get()` ‡πÅ‡∏ó‡∏ô `fetch()`

### All Frontend Files Using Centralized API (13 files)
1. `client/src/services/api.ts` (v2.0) - Centralized axios instance
2. `client/src/pages/Login.tsx` (v2.0) - Token storage
3. `client/src/pages/CreateRequest.tsx` (v4.0)
4. `client/src/pages/PriceRequestList.tsx` (v3.0)
5. `client/src/pages/PricingView.tsx` (v2.0)
6. `client/src/pages/MasterData.tsx` (v4.0)
7. `client/src/pages/UserProfile.tsx` (v2.1)
8. `client/src/pages/Settings.tsx` (v2.0)
9. `client/src/components/ActivityLogs.tsx` (v2.0)
10. `client/src/components/PriceCalculator.tsx` (v2.0)
11. `client/src/components/ImportManager.tsx` (v2.0)
12. `client/src/components/ApiSettings.tsx` (v2.0)
13. `client/src/components/MasterDataViewer.tsx` (v1.2) ‚úÖ **NOW FIXED**

## [5.6] - 2025-10-14

### Added - Master Data Tabs Redesign (Complete)
- **Master Data Page Restructure** (`client/src/pages/MasterData.tsx` v4.0 ‚Üí v5.0)
  - ‡∏à‡∏±‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö tabs ‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å 11 tabs ‡πÄ‡∏õ‡πá‡∏ô 6 grouped tabs ‡∏û‡∏£‡πâ‡∏≠‡∏° sub-tabs
  - ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
  - **New Tab Structure**:
    1. **üîÑ MongoDB Sync** (Import Data + View MongoDB Data)
    2. **üë• Customers** (Customer Groups + Customer Mappings)
    3. **üí∞ Pricing Master** (Standard Prices + Fab Costs + Selling Factors)
    4. **üí± Market Data** (LME Master Data + Exchange Rates)
    5. **‚öôÔ∏è System Config** (Currencies)
    6. **üìä Activity Logs** (Activity Logs)

- **Tab Group Architecture**
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á `TabGroup` interface ‡∏û‡∏£‡πâ‡∏≠‡∏° `subTabs` support
  - Navigation ‡πÅ‡∏ö‡∏ö 2 ‡∏£‡∏∞‡∏î‡∏±‡∏ö: Primary tabs + Secondary sub-tabs
  - UI ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á: Primary tabs ‡πÅ‡∏™‡∏î‡∏á icon ‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°, Sub-tabs ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô rounded pills
  - Component-based architecture: ‡πÅ‡∏ï‡πà‡∏•‡∏∞ tab render component ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°

### Changed - Code Quality Improvements
- **TypeScript Warnings Fixed**
  - `MasterDataViewer.tsx` (v1.0 ‚Üí v1.1):
    - ‡∏•‡∏ö unused interfaces (RawMaterial, Product, Customer)
    - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç unused variable 'd' ‡πÉ‡∏ô filter functions
    - ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô data type selector
  - `UserProfile.tsx` (v2.0 ‚Üí v2.1):
    - ‡∏•‡∏ö unused `loading` state variable
    - ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á `loadProfile()` function

### Features
- ‚úÖ **Cleaner Navigation**: ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏° tabs ‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô
- ‚úÖ **Better UX**: ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- ‚úÖ **Scalable Design**: ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏° sub-tabs ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢
- ‚úÖ **Visual Hierarchy**: ‡πÅ‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö Primary ‡πÅ‡∏•‡∏∞ Secondary tabs ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- ‚úÖ **TypeScript Clean**: ‡πÑ‡∏°‡πà‡∏°‡∏µ TypeScript warnings/errors (tsc --noEmit ‡∏ú‡πà‡∏≤‡∏ô)

### Technical Details
- **Frontend Files Modified** (3 files):
  - `client/src/pages/MasterData.tsx` (v4.0 ‚Üí v5.0)
  - `client/src/components/MasterDataViewer.tsx` (v1.0 ‚Üí v1.1)
  - `client/src/pages/UserProfile.tsx` (v2.0 ‚Üí v2.1)

- **New Interfaces**:
  ```typescript
  interface TabGroup {
    id: string;
    label: string;
    icon: string;
    subTabs?: SubTab[];
    component?: React.FC;
  }

  interface SubTab {
    id: string;
    label: string;
    component: React.FC;
  }
  ```

### Documentation
- üìö **MASTER_DATA_REDESIGN.md** - ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö tab structure ‡πÉ‡∏´‡∏°‡πà

### Benefits
- üéØ **Reduced Complexity**: ‡∏à‡∏≤‡∏Å 11 tabs ‚Üí 6 grouped tabs
- üéØ **Organized by Category**: ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- üéØ **Easier Navigation**: ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô
- üéØ **Maintainable**: ‡πÄ‡∏û‡∏¥‡πà‡∏° features ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢

## [5.5] - 2025-10-14

### Added - Frontend JWT Authentication Integration
- **Centralized API Client** (`client/src/services/api.ts` v2.0)
  - ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô JWT Authentication Interceptor
  - ‡πÅ‡∏ô‡∏ö JWT token ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å request (`Authorization: Bearer <token>`)
  - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ 401 Unauthorized response (‡∏•‡∏ö token ‡πÅ‡∏•‡∏∞ reload ‡∏´‡∏ô‡πâ‡∏≤ login)
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö error handling ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡∏î‡πâ‡∏ß‡∏¢ axios interceptors

- **Login Token Management** (`client/src/pages/Login.tsx` v2.0)
  - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å JWT token ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å `/auth/login` ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô localStorage
  - ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: `{ username, password }` ‚Üí ‡∏£‡∏±‡∏ö: `{ access_token, user }`
  - ‡πÅ‡∏™‡∏î‡∏á error message ‡πÄ‡∏°‡∏∑‡πà‡∏≠ login ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

### Fixed - Backend JWT Response Format
- **Auth Service** (`server/src/auth/auth.service.ts` v2.0 ‚Üí v2.1)
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç response format ‡∏à‡∏≤‡∏Å `{ token, user }` ‡πÄ‡∏õ‡πá‡∏ô `{ access_token, user }`
  - ‡πÉ‡∏ä‡πâ `access_token` ‡∏ï‡∏≤‡∏° JWT standard naming convention
  - ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Frontend ‡∏£‡∏±‡∏ö token ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î error "No token received from server"

### Changed - Frontend API Migration
- **All Frontend Components** ‡πÉ‡∏ä‡πâ centralized `api` instance ‡πÅ‡∏ó‡∏ô local axios/fetch
  - `CreateRequest.tsx` (v3.6 ‚Üí v4.0) - ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà fetch() 5 ‡∏à‡∏∏‡∏î‡∏î‡πâ‡∏ß‡∏¢ api.get/post/put
  - `PriceRequestList.tsx` (v2.6 ‚Üí v3.0) - ‡∏•‡∏ö local axios instance, ‡πÉ‡∏ä‡πâ centralized api
  - `PricingView.tsx` (v1.6 ‚Üí v2.0) - ‡∏•‡∏ö local axios instance, ‡πÉ‡∏ä‡πâ centralized api
  - `MasterData.tsx` (v3.8 ‚Üí v4.0) - ‡∏•‡∏ö local axios instance, ‡πÉ‡∏ä‡πâ centralized api

### Security üîí
- ‚úÖ **Automatic Token Injection**: JWT token ‡πÅ‡∏ô‡∏ö‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å request ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ **Centralized Error Handling**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ 401 Unauthorized ‡πÅ‡∏ö‡∏ö‡∏£‡∏ß‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå
- ‚úÖ **Session Management**: ‡∏•‡∏ö token ‡πÅ‡∏•‡∏∞ force logout ‡πÄ‡∏°‡∏∑‡πà‡∏≠ token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
- ‚úÖ **No More Hardcoded URLs**: ‡πÉ‡∏ä‡πâ relative paths ‡∏ú‡πà‡∏≤‡∏ô api instance ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

### Technical Details
- **Backend Files Modified** (1 file):
  - `server/src/auth/auth.service.ts` (v2.0 ‚Üí v2.1, JWT response format)

- **Frontend Files Modified** (12 files):
  - `client/src/services/api.ts` (v1.0 ‚Üí v2.0, ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô interceptors)
  - `client/src/pages/Login.tsx` (v1.0 ‚Üí v2.0, ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å token)
  - `client/src/pages/CreateRequest.tsx` (v3.6 ‚Üí v4.0, ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà fetch ‡∏î‡πâ‡∏ß‡∏¢ api)
  - `client/src/pages/PriceRequestList.tsx` (v2.6 ‚Üí v3.0, ‡πÉ‡∏ä‡πâ centralized api)
  - `client/src/pages/PricingView.tsx` (v1.6 ‚Üí v2.0, ‡πÉ‡∏ä‡πâ centralized api)
  - `client/src/pages/MasterData.tsx` (v3.8 ‚Üí v4.0, ‡πÉ‡∏ä‡πâ centralized api)
  - `client/src/pages/UserProfile.tsx` (v1.0 ‚Üí v2.0, ‡πÉ‡∏ä‡πâ centralized api)
  - `client/src/pages/Settings.tsx` (v1.0 ‚Üí v2.0, ‡πÉ‡∏ä‡πâ centralized api)
  - `client/src/components/ActivityLogs.tsx` (v1.0 ‚Üí v2.0, ‡πÉ‡∏ä‡πâ centralized api)
  - `client/src/components/PriceCalculator.tsx` (v1.0 ‚Üí v2.0, ‡πÉ‡∏ä‡πâ centralized api)
  - `client/src/components/ImportManager.tsx` (v1.0 ‚Üí v2.0, ‡πÉ‡∏ä‡πâ centralized api)
  - `client/src/components/ApiSettings.tsx` (v1.0 ‚Üí v2.0, ‡πÉ‡∏ä‡πâ centralized api)

### Benefits
- üéØ **Consistency**: ‡∏ó‡∏∏‡∏Å component ‡πÉ‡∏ä‡πâ api instance ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
- üéØ **Maintainability**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç authentication logic ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏°‡∏µ‡∏ú‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö
- üéØ **Better DX**: ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á manually ‡πÅ‡∏ô‡∏ö token ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞ request
- üéØ **Error Handling**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ expired token ‡πÅ‡∏ö‡∏ö‡∏£‡∏ß‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå
- üéØ **Clean Code**: ‡∏•‡∏ö duplicated axios instances (4 ‡πÑ‡∏ü‡∏•‡πå)

## [5.4] - 2025-10-14

### Added - MongoDB Primary + Security Enhancement
- **MongoDB as Primary Data Source**
  - MongoDB ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà API ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ)
  - ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô MongoDB ‡∏ú‡πà‡∏≤‡∏ô environment variable: `ENABLE_MONGODB=true`
  - ‡∏•‡∏ö API-based import code ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (axios, ApiSetting entity)
  - ImportService ‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ MongoDB ‡∏ú‡πà‡∏≤‡∏ô MongodbService ‡πÅ‡∏•‡∏∞ MasterDataMongoService
  - ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå ImportService ‡∏à‡∏≤‡∏Å 1,308 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î ‚Üí 606 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î (53% reduction)

- **JWT Security Enhancement** üîí
  - **JWT Secret Validation**: ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏°‡∏µ JWT_SECRET ‡πÉ‡∏ô environment variable (‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï hardcode)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö JWT_SECRET ‡πÉ‡∏ô AuthModule ‡πÅ‡∏•‡∏∞ JwtStrategy
  - Throw error ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ JWT_SECRET (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô production security risk)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° JWT_SECRET ‡πÉ‡∏ô `.env` file

- **JWT Authentication Guards** üîí
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á JwtAuthGuard (`server/src/auth/jwt-auth.guard.ts`)
  - ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å API endpoints ‡∏î‡πâ‡∏ß‡∏¢ JWT authentication
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° `@UseGuards(JwtAuthGuard)` ‡πÉ‡∏ô Controllers ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (9 controllers):
    - DataController - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Price Requests, Master Data)
    - ImportController - Import/Sync operations
    - PriceCalculationController - Price calculation
    - SyncConfigController - Sync configuration
    - BomController - BOQ management
    - ActivityLogController - Activity logs
    - ApiSettingsController - API settings (deprecated)
    - MasterDataController - Mock data (deprecated)
    - PricingController - Pricing service

### Changed - Code Cleanup
- **ImportService** (`server/src/import/import.service.ts` v4.0 ‚Üí v5.0)
  - ‡∏•‡∏ö methods: `fetchFromApi()`, `fetchPaginatedData()`, `addAuthentication()`
  - ‡∏•‡∏ö DTOs: RawMaterialDTO, BOMItemDTO, FinishedGoodDTO, EmployeeDTO
  - ‡∏•‡∏ö dependencies: axios
  - MongodbService ‡πÅ‡∏•‡∏∞ MasterDataMongoService ‡πÄ‡∏õ‡πá‡∏ô required (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà @Optional ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ)
  - ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞ MongoDB-based import methods ‡∏û‡∏£‡πâ‡∏≠‡∏° bulk optimization

- **ImportModule** (`server/src/import/import.module.ts` v4.0 ‚Üí v5.0)
  - ‡∏•‡∏ö ApiSetting entity ‡∏à‡∏≤‡∏Å TypeOrmModule.forFeature
  - MongodbModule ‡∏ñ‡∏π‡∏Å import ‡πÄ‡∏™‡∏°‡∏≠ (‡πÑ‡∏°‡πà‡∏°‡∏µ conditional check)

- **Environment Configuration** (`.env`)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° `ENABLE_MONGODB=true` (enable MongoDB by default)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° `JWT_SECRET=change-this-to-a-secure-random-string-in-production`

### Security üîí
- ‚úÖ **JWT Secret Required**: ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô hardcode secret ‡πÉ‡∏ô production
- ‚úÖ **Authentication on All Endpoints**: ‡∏ó‡∏∏‡∏Å API endpoint ‡∏ï‡πâ‡∏≠‡∏á login ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- ‚úÖ **No Unauthenticated Access**: ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô unauthorized access ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- ‚ö†Ô∏è **Exception**: `/api/auth/login` ‡πÅ‡∏•‡∏∞ `/api/setup/*` ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Guard (public endpoints)

### Technical Details
- **Files Modified**:
  - `server/src/import/import.service.ts` (v4.0 ‚Üí v5.0, -702 lines)
  - `server/src/import/import.module.ts` (v4.0 ‚Üí v5.0)
  - `server/src/auth/auth.module.ts` (v1.0 ‚Üí v2.0)
  - `server/src/auth/jwt.strategy.ts` (v1.0 ‚Üí v2.0)
  - `server/.env` - ‡πÄ‡∏û‡∏¥‡πà‡∏° JWT_SECRET ‡πÅ‡∏•‡∏∞ ENABLE_MONGODB=true
- **Files Created**:
  - `server/src/auth/jwt-auth.guard.ts` (v1.0)
- **Files Updated with Guards** (9 controllers):
  - `server/src/data/data.controller.ts` (v1.4 ‚Üí v2.0)
  - `server/src/import/import.controller.ts` (v2.0 ‚Üí v3.0)
  - `server/src/price-calculation/price-calculation.controller.ts` (v1.0 ‚Üí v2.0)
  - `server/src/sync-config/sync-config.controller.ts` (v1.0 ‚Üí v2.0)
  - `server/src/bom/bom.controller.ts` (v1.0 ‚Üí v2.0)
  - `server/src/activity-log/activity-log.controller.ts` (v1.0 ‚Üí v2.0)
  - `server/src/api-settings/api-settings.controller.ts` (v1.0 ‚Üí v2.0 DEPRECATED)
  - `server/src/master-data/master-data.controller.ts` (v2.1 ‚Üí v3.0)
  - `server/src/pricing/pricing.controller.ts` (v1.0 ‚Üí v2.0)

### Breaking Changes
- ‚ö†Ô∏è **API Import Removed**: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ import ‡∏à‡∏≤‡∏Å External API ‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ (‡πÉ‡∏ä‡πâ MongoDB ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
- ‚ö†Ô∏è **JWT_SECRET Required**: ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ JWT_SECRET ‡πÉ‡∏ô .env ‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏±‡∏ô server
- ‚ö†Ô∏è **Authentication Required**: ‡∏ó‡∏∏‡∏Å API endpoint (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô /auth/login) ‡∏ï‡πâ‡∏≠‡∏á authenticate
- ‚ö†Ô∏è **MongoDB Required**: ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ MongoDB connection (ENABLE_MONGODB=true)

### Deprecated
- üóëÔ∏è **ApiSettingsController**: API import ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÉ‡∏ä‡πâ MongoDB)
- üóëÔ∏è **ApiSetting Entity**: ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ

### Documentation
- üìö Updated CLAUDE.md - ‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô MongoDB primary
- üìö Updated CHANGELOG.md - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á v5.4

## [5.3.1] - 2025-10-10

### Fixed - Dependency Injection & MongoDB Configuration
- **PriceCalculationModule** (`server/src/price-calculation/price-calculation.module.ts` v4.0)
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Dependency Injection Error: StandardPriceRepository not found
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° missing entities ‡πÉ‡∏ô TypeOrmModule.forFeature():
    - `StandardPrice` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô
    - `LmeMasterData` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤ LME
    - `FabCost` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï
    - `SellingFactor` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö factor ‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
    - `ExchangeRateMasterData` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
  - ‡∏ó‡∏≥‡πÉ‡∏´‡πâ PriceCalculationService inject repositories ‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô

- **MongodbModule** (`server/src/mongodb/mongodb.module.ts` v3.1)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° **Non-blocking MongoDB Connection**
  - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ connection timeouts:
    - `serverSelectionTimeoutMS: 5000` - Timeout ‡∏´‡∏•‡∏±‡∏á 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    - `connectTimeoutMS: 5000` - Connection timeout 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    - `socketTimeoutMS: 5000` - Socket timeout 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
  - ‡∏õ‡∏¥‡∏î retry mechanisms: `retryWrites: false`, `retryReads: false`
  - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `autoCreate: false`, `autoIndex: false`
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç error handler ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á warning ‡πÅ‡∏ó‡∏ô throw error
  - **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå**: Application ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ start ‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πâ MongoDB ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### Technical Details
- **Issue**: NestJS ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ resolve StandardPriceRepository dependency ‡πÉ‡∏ô PriceCalculationService
- **Root Cause**: PriceCalculationModule ‡∏Ç‡∏≤‡∏î entity registrations ‡πÉ‡∏ô TypeOrmModule.forFeature()
- **Solution**: ‡πÄ‡∏û‡∏¥‡πà‡∏° entities ‡∏ó‡∏±‡πâ‡∏á 5 ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà PriceCalculationService ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
- **Build Status**: ‚úÖ Compilation successful (0 errors)
- **Server Status**: ‚úÖ Running on http://localhost:3001

### Files Changed
- `server/src/price-calculation/price-calculation.module.ts` (v3.0 ‚Üí v4.0)
- `server/src/mongodb/mongodb.module.ts` (v3.0 ‚Üí v3.1)

## [5.3] - 2025-10-09

### Added - Universal Sync with Toggle Control
- **SyncConfig Entity** (`server/src/entities/sync-config.entity.ts`)
  - Entity ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Sync ‡πÅ‡∏ï‡πà‡∏•‡∏∞ table
  - Fields: `entityType`, `isEnabled`, `dataSource`, `mongoCollection`, `syncFrequency`, `lastSyncAt`, `lastSyncStatus`
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 9 Entity Types: CUSTOMER, PRODUCT, RAW_MATERIAL, BOM, STANDARD_PRICE, LME_PRICE, EXCHANGE_RATE, FAB_COST, SELLING_FACTOR
  - Toggle ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î sync ‡πÅ‡∏ï‡πà‡∏•‡∏∞ entity ‡πÑ‡∏î‡πâ
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Data Source: MONGODB, API, MANUAL
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Sync Frequency: MANUAL, DAILY, HOURLY, REAL_TIME
  - ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ sync ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (success, failed, partial)

- **SyncConfig Module** (`server/src/sync-config/`)
  - **SyncConfigService** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ CRUD ‡πÅ‡∏•‡∏∞ Toggle control
    - `getSyncConfig(entityType)` - ‡∏î‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö entity
    - `enableSync(entityType)` / `disableSync(entityType)` - ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î sync
    - `updateSyncConfig()` - ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
    - `initializeAllConfigs()` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å entity
    - `getSyncSummary()` - ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£ sync ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    - `bulkUpdateSyncConfigs()` - ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏´‡∏•‡∏≤‡∏¢ entity ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
  - **SyncConfigController** - API endpoints ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ sync config
    - `GET /api/sync-config` - ‡∏î‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    - `GET /api/sync-config/:entityType` - ‡∏î‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á entity
    - `GET /api/sync-config/summary/all` - ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ sync
    - `POST /api/sync-config/:entityType/enable` - ‡πÄ‡∏õ‡∏¥‡∏î sync
    - `POST /api/sync-config/:entityType/disable` - ‡∏õ‡∏¥‡∏î sync
    - `PUT /api/sync-config/:entityType` - ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
    - `POST /api/sync-config/initialize` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    - `POST /api/sync-config/bulk-update` - ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏´‡∏•‡∏≤‡∏¢ entity

- **Enhanced ImportService** (`server/src/import/import.service.ts` v4.0)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° `isSyncEnabled(entityType)` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô sync ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° `updateSyncStatus()` - ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ sync ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° `importCustomers()` - Sync Customers ‡∏à‡∏≤‡∏Å MongoDB ‚Üí Local DB
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° `importProducts()` - Sync Products (FG) ‡∏à‡∏≤‡∏Å MongoDB ‚Üí Local DB
  - ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á `importStandardPrices()`, `importLmePrices()`, `importExchangeRates()` ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö toggle
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° `importAllData()` - Sync ‡∏ó‡∏∏‡∏Å entity (Customer, Product, Master Data) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
  - ‡∏ó‡∏∏‡∏Å import method ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `isEnabled` ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
  - ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ sync (success/failed/partial) ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

- **Enhanced ImportController** (`server/src/import/import.controller.ts` v2.0)
  - **New Sync Endpoints** (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ):
    - `POST /api/import/sync/customers` - Sync Customers
    - `POST /api/import/sync/products` - Sync Products
    - `POST /api/import/sync/standard-prices` - Sync Standard Prices
    - `POST /api/import/sync/lme-prices` - Sync LME Prices
    - `POST /api/import/sync/exchange-rates` - Sync Exchange Rates
    - `POST /api/import/sync/all` - Sync ‡∏ó‡∏∏‡∏Å entity ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
  - **Legacy Endpoints** (Backward Compatibility):
    - `POST /api/import/master-data/all` - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ `importAllMasterData()`
    - `POST /api/import/master-data/standard-prices` - Redirect to sync endpoint
    - `POST /api/import/master-data/lme-prices` - Redirect to sync endpoint
    - `POST /api/import/master-data/exchange-rates` - Redirect to sync endpoint

### Features
- ‚úÖ **Universal Toggle Control**: ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î sync ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å entity ‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô
- ‚úÖ **Customer Sync**: ‡∏î‡∏∂‡∏á Customers ‡∏à‡∏≤‡∏Å MongoDB ‡∏°‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Local DB
- ‚úÖ **Product Sync**: ‡∏î‡∏∂‡∏á Products (Finished Goods) ‡∏à‡∏≤‡∏Å MongoDB ‡∏°‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Local DB
- ‚úÖ **Sync Status Tracking**: ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ sync ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ entity
- ‚úÖ **Flexible Configuration**: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ collection name, query, frequency ‡πÅ‡∏¢‡∏Å‡πÅ‡∏ï‡πà‡∏•‡∏∞ entity
- ‚úÖ **Bulk Operations**: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏•‡∏≤‡∏¢ entity ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
- ‚úÖ **Default Initialization**: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å entity

### Technical Details
- **Architecture**: Data Synchronization Pattern (MongoDB ‚Üí Import/Sync ‚Üí Local DB ‚Üí Use)
- **Sync Flow**:
  ```
  1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö SyncConfig.isEnabled
  2. ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î ‚Üí ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å MongoDB
  3. Upsert ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤ Local DB (INSERT or UPDATE)
  4. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó SyncConfig (lastSyncAt, lastSyncStatus, lastSyncRecords)
  5. Return ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (inserted, updated, errors)
  ```
- **Entity Types**: CUSTOMER, PRODUCT, RAW_MATERIAL, BOM, STANDARD_PRICE, LME_PRICE, EXCHANGE_RATE, FAB_COST, SELLING_FACTOR
- **Default Collections**: `customers`, `products`, `raw_materials`, `bom`, `standard_prices`, `lme_master_data`, `exchange_rate_master_data`, `fab_costs`, `selling_factors`
- **Build Status**: ‚úÖ Successful compilation (no errors)

### Files Changed
- **New Files**:
  - `server/src/entities/sync-config.entity.ts` (70 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
  - `server/src/sync-config/sync-config.service.ts` (190 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
  - `server/src/sync-config/sync-config.controller.ts` (130 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
  - `server/src/sync-config/sync-config.module.ts` (15 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
- **Modified Files**:
  - `server/src/import/import.service.ts` (v3.0 ‚Üí v4.0, +250 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
  - `server/src/import/import.controller.ts` (v1.0 ‚Üí v2.0, +50 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
  - `server/src/import/import.module.ts` (v3.0 ‚Üí v4.0, +1 entity)
  - `server/src/app.module.ts` (+2 imports, +1 module)

### Usage Example
```bash
# 1. Initialize sync configs
POST /api/sync-config/initialize

# 2. Enable sync for specific entities
POST /api/sync-config/CUSTOMER/enable
POST /api/sync-config/PRODUCT/enable
POST /api/sync-config/STANDARD_PRICE/enable

# 3. Sync data (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
POST /api/import/sync/customers
POST /api/import/sync/products
POST /api/import/sync/all  # Sync ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô

# 4. Check sync status
GET /api/sync-config/summary/all
```

### Breaking Changes
- ‡πÑ‡∏°‡πà‡∏°‡∏µ breaking changes
- Legacy endpoints ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
- Sync endpoints ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô opt-in (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô SyncConfig)

## [5.1] - 2025-10-07

### Added - Price Calculation Engine
- **Price Calculation Service** (`server/src/price-calculation/price-calculation.service.ts`)
  - `calculatePrice()`: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å Product ID, Quantity, ‡πÅ‡∏•‡∏∞ Customer Group
  - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Material Costs ‡∏à‡∏≤‡∏Å BOQ (Bill of Quantities)
  - ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏à‡∏≤‡∏Å LME Price Master Data ‡πÅ‡∏•‡∏∞ Standard Price (‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: LME > Standard)
  - ‡∏î‡∏∂‡∏á FAB Cost (Fabrication Cost) ‡∏à‡∏≤‡∏Å Master Data
  - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Selling Price ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Selling Factor
  - ‡πÅ‡∏õ‡∏•‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡πá‡∏ô THB ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Exchange Rate Master Data
  - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Margin (Percentage ‡πÅ‡∏•‡∏∞ Amount)
  - ‡πÄ‡∏Å‡πá‡∏ö Master Data Versions ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Snapshot (traceability)
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Customer Group ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
- **Price Calculation Controller** (`server/src/price-calculation/price-calculation.controller.ts`)
  - `POST /api/price-calculation/calculate`: API endpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
  - Error handling ‡πÅ‡∏•‡∏∞ response formatting
- **Price Calculation Module** (`server/src/price-calculation/price-calculation.module.ts`)
  - NestJS module definition
  - TypeORM integration ‡∏Å‡∏±‡∏ö entities ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà:
    - StandardPrice: ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö
    - LmeMasterData: ‡∏£‡∏≤‡∏Ñ‡∏≤ LME ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
    - FabCost: ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï
    - SellingFactor: ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
    - ExchangeRateMasterData: ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
- **Price Calculator Component** (`client/src/components/PriceCalculator.tsx`)
  - UI component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
  - ‡πÅ‡∏™‡∏î‡∏á Price Calculation Summary (Total Cost, Selling Price, Margin)
  - ‡πÅ‡∏™‡∏î‡∏á Material Costs Breakdown (‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö ‡∏û‡∏£‡πâ‡∏≠‡∏° Unit Price ‡πÅ‡∏•‡∏∞ Total Cost)
  - ‡πÅ‡∏™‡∏î‡∏á Cost Breakdown (Material + FAB Cost ‚Üí Selling Price USD ‚Üí Selling Price THB)
  - ‡πÅ‡∏™‡∏î‡∏á Price Source (LME, Standard, None) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö
  - ‡πÅ‡∏™‡∏î‡∏á Master Data Versions (Snapshot) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö audit trail
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Currency Formatting (USD, THB)
- **Integration with CreateRequest Page** (`client/src/pages/CreateRequest.tsx`)
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° PriceCalculator component ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤
  - ‡πÅ‡∏™‡∏î‡∏á Price Calculator ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Product ‡∏°‡∏µ BOQ ‡πÅ‡∏•‡πâ‡∏ß
  - Auto-trigger calculation ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

### Features
- ‚úÖ BOQ-Based Calculation: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å Bill of Quantities (BOQ) ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ Multi-Source Pricing: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏´‡∏•‡πà‡∏á (LME Price, Standard Price)
- ‚úÖ Customer Group Pricing: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
- ‚úÖ FAB Cost Integration: ‡∏£‡∏ß‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï (Fabrication Cost)
- ‚úÖ Selling Factor: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Selling Factor
- ‚úÖ Multi-Currency: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô (USD, THB)
- ‚úÖ Margin Calculation: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Margin (Percentage ‡πÅ‡∏•‡∏∞ Amount)
- ‚úÖ Master Data Versioning: ‡πÄ‡∏Å‡πá‡∏ö version ‡∏Ç‡∏≠‡∏á Master Data ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Snapshot
- ‚úÖ Real-Time Calculation: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ö‡∏ö Real-Time ‡∏ú‡πà‡∏≤‡∏ô UI
- ‚úÖ Detailed Breakdown: ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ó‡∏∏‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô

### Technical Details
- **Backend Files**:
  - `server/src/price-calculation/price-calculation.service.ts` (440 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
  - `server/src/price-calculation/price-calculation.controller.ts` (50 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
  - `server/src/price-calculation/price-calculation.module.ts` (35 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
  - `server/src/app.module.ts` - ‡πÄ‡∏û‡∏¥‡πà‡∏° PriceCalculationModule
- **Frontend Files**:
  - `client/src/components/PriceCalculator.tsx` (320 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
  - `client/src/pages/CreateRequest.tsx` - ‡πÄ‡∏û‡∏¥‡πà‡∏° PriceCalculator integration
- **API Endpoints**:
  - `POST /api/price-calculation/calculate` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
    - Input: `{ productId, quantity, customerGroupId? }`
    - Output: `{ materialCosts, totalCost, sellingPrice, margin, masterDataVersions, ... }`
- **Calculation Logic**:
  ```
  Material Cost = Œ£ (BOQ Quantity √ó Unit Price √ó Product Quantity)
  Total Cost = Material Cost + FAB Cost
  Selling Price (USD) = Total Cost √ó Selling Factor
  Selling Price (THB) = Selling Price (USD) √ó Exchange Rate
  Margin = Selling Price - Total Cost
  Margin % = (Margin / Total Cost) √ó 100
  ```

### Dependencies
- ‡πÉ‡∏ä‡πâ entities ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (StandardPrice, LmeMasterData, FabCost, SellingFactor, ExchangeRateMasterData)
- ‡πÉ‡∏ä‡πâ VersionedEntity base class ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Master Data versioning
- ‡πÑ‡∏°‡πà‡∏°‡∏µ breaking changes ‡∏Å‡∏±‡∏ö entities ‡πÄ‡∏î‡∏¥‡∏°

## [5.0] - 2025-10-01

### Added - UI Restructure & User Profile
- **Settings Page** (`client/src/pages/Settings.tsx`)
  - ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏ß‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÉ‡∏´‡∏°‡πà
  - Tab "üîå API Settings": ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ External API endpoints
  - Tab "‚öôÔ∏è System Config": ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó, ‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô, ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏†‡∏≤‡∏©‡∏µ, timezone)
  - Tab "üì• Import Config": ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£ Import (‡πÄ‡∏ß‡∏•‡∏≤ auto-update, max records)
- **User Profile Page** (`client/src/pages/UserProfile.tsx`)
  - ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß
  - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Profile (‡∏ä‡∏∑‡πà‡∏≠, ‡∏≠‡∏µ‡πÄ‡∏°‡∏•, ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£, ‡πÅ‡∏ú‡∏ô‡∏Å)
  - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)
  - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• (‡∏†‡∏≤‡∏©‡∏≤, ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà, ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô)
  - Dashboard ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (Price Requests created, Approved, Last Login)
- **Navigation Restructure** (`client/src/components/layout/MainLayout.tsx`)
  - ‡πÅ‡∏ö‡πà‡∏á Sidebar Navigation ‡πÄ‡∏õ‡πá‡∏ô 3 ‡∏™‡πà‡∏ß‡∏ô:
    - **MAIN**: Price Requests, Master Data
    - **SYSTEM**: Settings (‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà)
    - **USER**: Profile (‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà - ‡∏ä‡∏¥‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á)

### Changed - Master Data Cleanup
- **Master Data Page** (`client/src/pages/MasterData.tsx` v3.3)
  - ‡∏•‡∏ö tabs ‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô: API Settings, System Settings, Sync Data
  - ‡∏¢‡πâ‡∏≤‡∏¢ API Settings ‚Üí Settings page (API Settings tab)
  - ‡∏¢‡πâ‡∏≤‡∏¢ System Settings ‚Üí Settings page (System Config tab)
  - ‡∏¢‡πâ‡∏≤‡∏¢ Sync Data ‚Üí Settings page (Import Config tab)
  - ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞ tabs ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

### Features
- ‚úÖ Centralized Settings: ‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- ‚úÖ User Profile Management: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö
- ‚úÖ Cleaner Navigation: ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô
- ‚úÖ Reduced Clutter: Master Data ‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏°‡∏µ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å
- ‚úÖ Better UX: ‡πÄ‡∏°‡∏ô‡∏π Settings ‡πÅ‡∏•‡∏∞ Profile ‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Master Data

### Technical Details
- **Frontend Files**:
  - `client/src/pages/Settings.tsx` - Settings page (NEW)
  - `client/src/pages/UserProfile.tsx` - User profile page (NEW)
  - `client/src/components/layout/MainLayout.tsx` v3.0 - Updated navigation
  - `client/src/pages/MasterData.tsx` v3.3 - Removed redundant tabs

## [4.1] - 2025-10-01

### Added - Master Data Viewer
- **Master Data Viewer Component** (`client/src/components/MasterDataViewer.tsx`)
  - ‡∏´‡∏ô‡πâ‡∏≤‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Master Data ‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏à‡∏≤‡∏Å API
  - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Raw Materials, Finished Goods, Customers, Employees
  - ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (search by ID/name, filter by source)
  - ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: Total, Active, From API, Manual
  - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: sourceSystem (D365/Manual), lastSyncedAt, isActive
  - Tab "üìä View Data" ‡πÉ‡∏ô Master Data Management

### Features
- ‚úÖ Multi-type Data Viewer: ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- ‚úÖ Source Tracking: ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏à‡∏≤‡∏Å API ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡πâ‡∏≠‡∏ô‡πÄ‡∏≠‡∏á
- ‚úÖ Search & Filter: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ
- ‚úÖ Sync Status: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤ sync ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ record
- ‚úÖ Statistics Dashboard: ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

## [4.0] - 2025-10-01

### Added - API-Based Master Data Import System
- **API Settings Entity** (`server/src/entities/api-setting.entity.ts`)
  - ‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ External API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö authentication: Bearer Token, API Key, Basic Auth
  - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° sync status ‡πÅ‡∏•‡∏∞ timestamp
- **API Settings Module** (`server/src/api-settings/`)
  - ApiSettingsService: CRUD operations ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API configurations
  - ApiSettingsController: REST API endpoints ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ API settings
  - Password masking: ‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• sensitive (tokens, passwords)
- **Import Module** (`server/src/import/`)
  - ImportService v2.0: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å External APIs (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà local files)
  - ImportController: REST API endpoints ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö manual import ‡πÅ‡∏•‡∏∞ auto-update
  - ImportModule: NestJS module ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö dependency injection
- **API Settings UI** (`client/src/components/ApiSettings.tsx`)
  - ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API endpoints ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Raw Materials, Finished Goods, Employees, Customers
  - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö authentication types: None, Bearer, API Key, Basic Auth
  - ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ sync ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (success/partial/failed)
  - Test connection feature
- **Import Functions**
  - `importRawMaterials()`: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Raw Materials ‡∏à‡∏≤‡∏Å External API
  - `importFinishedGoods()`: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Finished Goods + BOQ ‡∏à‡∏≤‡∏Å External API
  - `importAll()`: Import ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
  - Upsert logic: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß, insert ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ
  - Error handling: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API settings ‡∏Å‡πà‡∏≠‡∏ô import
- **Auto-Update System**
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞ update ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ß‡∏±‡∏ô‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á
  - ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ user ‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö
  - ‡πÉ‡∏ä‡πâ SystemConfig ‡πÄ‡∏Å‡πá‡∏ö `lastAutoUpdateDate` ‡πÅ‡∏•‡∏∞ `autoUpdateEnabled`
- **Import UI** (`client/src/components/ImportManager.tsx`)
  - Tab "üì• Import Data" ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô Master Data Management
  - ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Settings ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥ Import
  - ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ last sync ‡πÅ‡∏•‡∏∞ auto-update status
  - ‡∏õ‡∏∏‡πà‡∏° manual import: Import All, Import RM, Import FG
  - ‡πÅ‡∏™‡∏î‡∏á statistics: inserted/updated/errors
  - ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ errors ‡πÅ‡∏ö‡∏ö collapsible

### Changed - Entity Schema Updates
- **Customer, Product, RawMaterial Entities**
  - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå `sourceSystem` (nullable): ‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤ ('D365', 'Manual')
  - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå `lastSyncedAt` (nullable): timestamp ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£ sync ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **BOM Entity**
  - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå `unit`: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ (kg, m, mm, pcs, sheet, g, etc.)

### Technical Details
- **Backend Files**:
  - `server/src/entities/api-setting.entity.ts` - API Settings entity
  - `server/src/api-settings/` - API Settings module (service, controller)
  - `server/src/import/import.service.ts` - Import logic v2.0 (API-based)
  - `server/src/import/import.controller.ts` - API endpoints
  - `server/src/import/import.module.ts` - Module definition
  - `server/src/app.module.ts` - ‡πÄ‡∏û‡∏¥‡πà‡∏° ImportModule ‡πÅ‡∏•‡∏∞ ApiSettingsModule
- **Frontend Files**:
  - `client/src/components/ApiSettings.tsx` - API Settings UI
  - `client/src/components/ImportManager.tsx` - Import UI component
  - `client/src/pages/MasterData.tsx` - ‡πÄ‡∏û‡∏¥‡πà‡∏° Import ‡πÅ‡∏•‡∏∞ API Settings tabs
- **API Endpoints (Import)**:
  - `POST /api/import/all` - Import ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  - `POST /api/import/raw-materials` - Import ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ RM
  - `POST /api/import/finished-goods` - Import ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ FG
  - `GET /api/import/status` - ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ import
  - `GET /api/import/should-auto-update` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏£ auto-update ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
  - `POST /api/import/auto-update` - Trigger auto-update
- **API Endpoints (API Settings)**:
  - `GET /api/api-settings` - ‡∏î‡∏π API settings ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  - `GET /api/api-settings/:apiType` - ‡∏î‡∏π API setting ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
  - `POST /api/api-settings` - ‡∏™‡∏£‡πâ‡∏≤‡∏á API setting ‡πÉ‡∏´‡∏°‡πà
  - `PUT /api/api-settings/:apiType` - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï API setting
  - `DELETE /api/api-settings/:apiType` - ‡∏•‡∏ö API setting
  - `POST /api/api-settings/:apiType/test` - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API

### Features
- ‚úÖ API Configuration: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ External API endpoints ‡∏û‡∏£‡πâ‡∏≠‡∏° authentication
- ‚úÖ Multiple Auth Types: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Bearer Token, API Key, Basic Auth
- ‚úÖ API-Based Import: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å External APIs ‡πÅ‡∏ó‡∏ô local files
- ‚úÖ Manual Import: Import ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ú‡πà‡∏≤‡∏ô UI
- ‚úÖ Auto-Update: ‡∏£‡∏∞‡∏ö‡∏ö update ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ß‡∏±‡∏ô‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- ‚úÖ Background Processing: ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á frontend
- ‚úÖ Error Handling: ‡πÅ‡∏™‡∏î‡∏á errors ‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ import
- ‚úÖ Data Tracking: ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ sync
- ‚úÖ Security: Password/token masking ‡πÉ‡∏ô API responses

### Breaking Changes
- ‚ö†Ô∏è ImportService ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö file-based import ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Settings ‡∏Å‡πà‡∏≠‡∏ô
- ‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á ApiSetting records ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞ import ‡πÑ‡∏î‡πâ

### Documentation
- üìö API_SETUP_GUIDE.md - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ External APIs
- üìö IMPORT_GUIDE.md - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Import (updated)

## [3.10] - 2025-09-22

### Fixed
- **Critical**: Fixed "Failed to create the price request" error caused by Foreign Key constraints
- **Database**: Made `customerId`, `productId`, and `createdBy` columns nullable in PriceRequest entity
- **Service**: Enhanced DataService to properly handle null foreign keys
- **Package**: Resolved Git merge conflicts in server/package.json

### Changed
- **Architecture**: Completely eliminated all mock data and hardcoded values
- **Database**: Full migration to SQLite database with TypeORM entities
- **Authentication**: Replaced hardcoded admin/admin with JWT + bcrypt authentication
- **API**: Updated all endpoints from `/mock-data` to `/api/data`
- **Frontend**: Updated all API calls to use new database-backed endpoints

### Added
- **Database Entities**:
  - User (UUID primary key, bcrypt passwords)
  - Customer, Product, RawMaterial
  - PriceRequest (with nullable foreign keys)
  - CustomerGroup, SystemConfig
- **Authentication**: Real JWT token generation and verification
- **Data Seeding**: Automatic database seeding with master data
- **User Repository**: Added User repository injection to DataService

### Technical Details
- **Files Modified**:
  - `src/entities/price-request.entity.ts` (lines 17, 24, 32)
  - `src/data/data.service.ts` (lines 60-114)
  - `server/package.json` (dependencies consolidation)
- **Database**: SQLite for development, PostgreSQL for production
- **ORM**: TypeORM with proper entity relationships
- **Security**: bcrypt password hashing, JWT tokens

## [3.9] - Previous Release
- Initial project setup
- Basic frontend and backend structure

## [3.8] - Previous Release
- Setup wizard implementation
- Basic mock data system

---

**Legend:**
- üîß **Fixed**: Bug fixes
- üîÑ **Changed**: Changes in existing functionality
- ‚ú® **Added**: New features
- üóëÔ∏è **Removed**: Removed features
- ‚ö†Ô∏è **Deprecated**: Soon-to-be removed features
- üîí **Security**: Security-related changes
